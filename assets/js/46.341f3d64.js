(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{422:function(t,e,a){t.exports=a.p+"assets/img/mysql_charset.19002d59.jpg"},621:function(t,e,a){"use strict";a.r(e);var r=a(10),s=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"mysql笔记"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql笔记"}},[t._v("$")]),t._v(" MySQL笔记")]),t._v(" "),e("h2",{attrs:{id:"数据类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据类型"}},[t._v("$")]),t._v(" 数据类型")]),t._v(" "),e("h3",{attrs:{id:"字段的显示宽度"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#字段的显示宽度"}},[t._v("$")]),t._v(" 字段的显示宽度")]),t._v(" "),e("p",[t._v("MySQL建表时常常要指定一个长度，这个长度并不是该数据类型占用的存储空间，而是所谓的显示宽度。对于如下的一张表，")]),t._v(" "),e("div",{staticClass:"language-mysql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("CREATE TABLE `test` (\n  `id` INT(2) UNSIGNED ZEROFILL NOT NULL AUTO_INCREMENT,\n  `name` CHAR(2) NOT NULL,\n  PRIMARY KEY (`id`)\n);\n")])])]),e("p",[t._v("对于varchar(2)这样的数据类型，不能插入’123’或者’你好吗’这样的字符串，但是可以插入’12’,’你好’这样的字符串，我们知道在utf8字符集下两个汉字占用6个字节的大小。\n对于int(2)这样的数据 类型，是可以插入数字123的，但是最大不能超过int存储范围的最大值，而当该字段打开unsinged zerofill属性时，不足的位数是用0补齐的，也就是说数字9显示为09。")]),t._v(" "),e("p",[t._v("参考:\n"),e("a",{attrs:{href:"http://www.netingcn.com/mysql-int-display-width.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.netingcn.com/mysql-int-display-width.html"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/numeric-type-attributes.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dev.mysql.com/doc/refman/5.7/en/numeric-type-attributes.html"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"日期时间类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日期时间类型"}},[t._v("$")]),t._v(" 日期时间类型")]),t._v(" "),e("p",[t._v("日期和时间类型包括 "),e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/datetime.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("DATE")]),e("OutboundLink")],1),t._v(", "),e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/time.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("TIME")]),e("OutboundLink")],1),t._v(", "),e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/datetime.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("DATETIME")]),e("OutboundLink")],1),t._v(", "),e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/datetime.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("TIMESTAMP")]),e("OutboundLink")],1),t._v(", 以及 "),e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/year.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("YEAR")]),e("OutboundLink")],1),t._v("，每种类型都有一系列有效值，以及当指定了无效值时可以使用的“ 零 ”值。"),e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/datetime.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("TIMESTAMP")]),e("OutboundLink")],1),t._v("类型具有特殊的自动更新行为。")]),t._v(" "),e("p",[t._v("使用日期和时间类型时，请记住以下一般注意事项：")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("MySQL以标准输出格式检索给定日期或时间类型的值，但它会尝试解释您提供的输入值的各种格式。")])]),t._v(" "),e("li",[e("p",[t._v("虽然MySQL试图解释几种格式的值，但日期部分必须始终以年 - 月 - 日的顺序（例如"),e("code",[t._v("'98-09-04'")]),t._v("）给出。")])]),t._v(" "),e("li",[e("p",[t._v("包含两位数年份值的日期是不明确的，MySQL使用以下规则解释两位数的年份值：")]),t._v(" "),e("ul",[e("li",[t._v("范围"),e("code",[t._v("70-99")]),t._v("中的年份值将转换为"),e("code",[t._v("1970-1999")]),t._v("。")]),t._v(" "),e("li",[t._v("范围"),e("code",[t._v("00-69")]),t._v("中的年份值将转换为"),e("code",[t._v("2000-2069")]),t._v("。")])])]),t._v(" "),e("li",[e("p",[t._v("MySQL允许将零值存储"),e("code",[t._v("'0000-00-00'")]),t._v("为“ 虚拟日期”。某些情况下零值比NULL更方便，并且占用更少的数据和索引空间。要禁用零值请设置"),e("code",[t._v("NO_ZERO_DATE")]),t._v("。")])]),t._v(" "),e("li",[e("p",[t._v("默认情况下遇到超出范围的值或者无效值时，MySQL会将该值转换为该类型的零值。例外情况是超出范围的TIME值。")])]),t._v(" "),e("li",[e("p",[t._v("在DATE和DATETIME类型中允许存储月份和天数为0的日期，如"),e("code",[t._v("'2009-00-00'")]),t._v(" 和 "),e("code",[t._v("'2009-01-00'")]),t._v("。要禁用此特性请启用NO_ZERO_IN_DATE模式。")])]),t._v(" "),e("li",[e("p",[t._v("ODBC零值会自动转换为"),e("code",[t._v("NULL")]),t._v(",因为ODBC无法处理此类值。")])])]),t._v(" "),e("p",[t._v("关于取值：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("数据类型")]),t._v(" "),e("th",[t._v("取值范围")]),t._v(" "),e("th",[t._v("零值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/datetime.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("DATE")]),e("OutboundLink")],1)]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("'0000-00-00'")])])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/time.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("TIME")]),e("OutboundLink")],1)]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("'00:00:00'")])])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/datetime.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("DATETIME")]),e("OutboundLink")],1)]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("'0000-00-00 00:00:00'")])])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/datetime.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("TIMESTAMP")]),e("OutboundLink")],1)]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("'0000-00-00 00:00:00'")])])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/year.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("YEAR")]),e("OutboundLink")],1)]),t._v(" "),e("td"),t._v(" "),e("td",[e("code",[t._v("0000")])])])])]),t._v(" "),e("h4",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("$")]),t._v(" 参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://dba.stackexchange.com/questions/13175/mysql-is-null-is-not-null-misbehaving",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL IS NULL / IS NOT NULL Misbehaving?"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://bugs.mysql.com/bug.php?id=940",target:"_blank",rel:"noopener noreferrer"}},[t._v("zero date is both null and not null in where clause"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.6/en/date-and-time-types.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Date and Time Types"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"sql-mode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sql-mode"}},[t._v("$")]),t._v(" SQL Mode")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("项")]),t._v(" "),e("th",[t._v("备注")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_allow_invalid_dates",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("ALLOW_INVALID_DATES")]),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("允许存储错误值，如"),e("code",[t._v("'2009-11-31'")])])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_no_zero_in_date",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("NO_ZERO_IN_DATE")]),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("不允许日期类型中的"),e("code",[t._v("0月")]),t._v("和"),e("code",[t._v("0天")]),t._v(", 如"),e("code",[t._v("'2009-00-00'")]),t._v(" 以及 "),e("code",[t._v("'2009-01-00'")]),t._v("。"),e("br"),t._v("不允许零值'0000-00-00'")])])])]),t._v(" "),e("h2",{attrs:{id:"ddl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ddl"}},[t._v("$")]),t._v(" DDL")]),t._v(" "),e("h3",{attrs:{id:"mysql授权"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql授权"}},[t._v("$")]),t._v(" MySQL授权")]),t._v(" "),e("ol",[e("li",[t._v("使用root用户（有授权权限的用户）")]),t._v(" "),e("li",[t._v("本机ip需要单独授权")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("grant all on *.* to 'user'@'ip' identified by 'password';\n")])])]),e("h2",{attrs:{id:"dml"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dml"}},[t._v("$")]),t._v(" DML")]),t._v(" "),e("h3",{attrs:{id:"replace语义"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#replace语义"}},[t._v("$")]),t._v(" Replace语义")]),t._v(" "),e("p",[t._v("参考：")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/insert.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("13.2.6 INSERT Statement"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/insert-on-duplicate.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("13.2.6.2 INSERT ... ON DUPLICATE KEY UPDATE Statement"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"dql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dql"}},[t._v("$")]),t._v(" DQL")]),t._v(" "),e("h3",{attrs:{id:"group-concat-函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#group-concat-函数"}},[t._v("$")]),t._v(" group_concat()函数")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("select group_concat(`field`,'字符串',`field`  separator  ';') from table group by `otherfield`\n")])])]),e("h2",{attrs:{id:"jdbc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jdbc"}},[t._v("$")]),t._v(" JDBC")]),t._v(" "),e("p",[t._v("参考：")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-examples.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chapter 5 Connector/J Examples"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"导入导出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#导入导出"}},[t._v("$")]),t._v(" 导入导出")]),t._v(" "),e("p",[t._v("第一步将数据导出到文本文件里：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v('$ mysql -h${HOST} -P${PORT} -u${user} -D${database} -p -e "select ..." > /tmp/data.file\n')])])]),e("p",[t._v("第二步\n登录mysql服务端导入数据文件：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("mysql> load data local infile '/tmp/data.file' into table ${table};\n")])])]),e("p",[t._v("Load Data方式：")]),t._v(" "),e("div",{staticClass:"language-mysql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("LOAD DATA LOCAL INFILE '/path_to_local_file'\nINTO TABLE db.tab\nFIELDS TERMINATED BY ','\n(c1, c2, c3)\nSET c4 = 6, c5 = 75;\n")])])]),e("p",[t._v("参考：")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/load-data.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("13.2.7 LOAD DATA Statement"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.51cto.com/corasql/1913191",target:"_blank",rel:"noopener noreferrer"}},[t._v('MySQL "replace into" 的坑'),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"常见问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("$")]),t._v(" 常见问题")]),t._v(" "),e("h3",{attrs:{id:"时区问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#时区问题"}},[t._v("$")]),t._v(" 时区问题")]),t._v(" "),e("p",[t._v("查看当前时区:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('mysql> show variables like "%time_zone%";\n+------------------+--------+\n| Variable_name    | Value  |\n+------------------+--------+\n| system_time_zone | CST    |\n| time_zone        | SYSTEM |\n+------------------+--------+\n')])])]),e("p",[t._v("time_zone说明mysql使用system的时区，system_time_zone说明system使用CST时区。")]),t._v(" "),e("p",[t._v("修改时区:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> set global time_zone = '+8:00';\nmysql> set time_zone = '+8:00';\nmysql> flush privileges;\n")])])]),e("p",[t._v("查看修改后时区:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('mysql> show variables like "%time_zone%";\n+------------------+--------+\n| Variable_name    | Value  |\n+------------------+--------+\n| system_time_zone | CST    |\n| time_zone        | +08:00 |\n+------------------+--------+\n')])])]),e("p",[t._v("或者修改MySQL配置文件(/etc/my.cnf):")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[mysqld]\ndefault-time_zone = '+8:00'\n")])])]),e("h4",{attrs:{id:"参考-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考-2"}},[t._v("$")]),t._v(" 参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.jianshu.com/p/ea7ef2d29940",target:"_blank",rel:"noopener noreferrer"}},[t._v("mybatis查询mysql的datetime类型数据时间差了14小时"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.cnblogs.com/mracale/p/6064447.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL修改时区的方法小结"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_schema",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL术语表"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"字符集编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#字符集编码"}},[t._v("$")]),t._v(" 字符集编码")]),t._v(" "),e("h4",{attrs:{id:"导入mysqldump文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#导入mysqldump文件"}},[t._v("$")]),t._v(" 导入MySQLDump文件")]),t._v(" "),e("p",[t._v("在mysql client中先输入"),e("code",[t._v("SET NAMES 'utf8';")]),t._v("然后再用source命令导入sql脚本。")]),t._v(" "),e("h4",{attrs:{id:"字符集"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#字符集"}},[t._v("$")]),t._v(" 字符集")]),t._v(" "),e("p",[t._v("MySQL默认latin1（其实就是ISO-8859-1）字符集：")]),t._v(" "),e("div",{staticClass:"language-mysql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> show variables like '%character%';\n+--------------------------+----------------------------------+\n| Variable_name            | Value                            |\n+--------------------------+----------------------------------+\n| character_set_client     | latin1                           | \n| character_set_connection | latin1                           | \n| character_set_database   | latin1                           | \n| character_set_filesystem | binary                           | \n| character_set_results    | latin1                           | \n| character_set_server     | latin1                           | \n| character_set_system     | utf8                             | \n| character_sets_dir       | /usr/local/mysql/share/charsets/ | \n+--------------------------+----------------------------------+\n")])])]),e("p",[t._v("说明：")]),t._v(" "),e("ul",[e("li",[t._v("character_set_filesystem：文件系统上的存储格式，默认为binary（二进制）")]),t._v(" "),e("li",[t._v("character_set_system：系统的存储格式，默认为utf8")]),t._v(" "),e("li",[t._v("character_sets_dir：可以使用的字符集的文件路径")]),t._v(" "),e("li",[t._v("character_set_client：客户端请求数据的字符集")]),t._v(" "),e("li",[t._v("character_set_connection：从客户端接收到数据，然后传输的字符集")]),t._v(" "),e("li",[t._v("character_set_database：默认数据库的字符集；如果没有默认数据库，使用character_set_server字段")]),t._v(" "),e("li",[t._v("character_set_results：结果集的字符集")]),t._v(" "),e("li",[t._v("character_set_server：数据库服务器的默认字符集")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(422),alt:"preview"}})]),t._v(" "),e("p",[t._v("字符集的转换流程分为3步：")]),t._v(" "),e("ol",[e("li",[t._v("客户端请求数据库数据，发送的数据使用character_set_client字符集")]),t._v(" "),e("li",[t._v("MySQL实例收到客户端发送的数据后，将其转换为character_set_connection字符集")]),t._v(" "),e("li",[t._v("进行内部操作时，将数据字符集转换为内部操作字符集：")]),t._v(" "),e("li",[t._v("使用每个数据字段的character set设定值")]),t._v(" "),e("li",[t._v("若不存在，使用对应数据表的default character set设定值")]),t._v(" "),e("li",[t._v("若不存在，使用对应数据库的default character set设定值")]),t._v(" "),e("li",[t._v("若不存在，使用character_set_server设定值")]),t._v(" "),e("li",[t._v("将操作结果值从内部操作字符集转换为character_set_results")])]),t._v(" "),e("h5",{attrs:{id:"设置字符集"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置字符集"}},[t._v("$")]),t._v(" 设置字符集")]),t._v(" "),e("p",[t._v("临时设置：")]),t._v(" "),e("div",{staticClass:"language-mysql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("set character_set_server=utf8;\nset character_set_database=utf8;\nset global character_set_server=utf8;\nset global character_set_database=utf8;\n")])])]),e("p",[t._v("修改配置文件"),e("code",[t._v("/etc/my.cnf")]),t._v("：")]),t._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token section"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("mysqld")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("character_set_server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("utf8")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token section"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("client")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("default-character-set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("utf8")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token section"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("mysql")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("default-character-set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("utf8")]),t._v("\n")])])]),e("p",[t._v("修改成功后重新启动MySQL数据库。")]),t._v(" "),e("p",[t._v("为确保字符集完全统一，在建表、建库的时候要强制设定统一字符集。\n另外通过JDBC连接MySQL的时候为确保万无一失，连接字符串需要加上以下参数：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("jdbc:mysql://localhost:3306/mysql?useUnicode=true&characterEncoding=UTF-8\n")])])]),e("h4",{attrs:{id:"字符序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#字符序"}},[t._v("$")]),t._v(" 字符序")]),t._v(" "),e("ul",[e("li",[t._v("字符(Character)是指人类语言中最小的表义符号。例如’A’、’B’等；")]),t._v(" "),e("li",[t._v("给定一系列字符，对每个字符赋予一个数值，用数值来代表对应的字符，这一数值就是字符的编码(Encoding)。例如，我们给字符’A’赋予数值0，给字符’B’赋予数值1，则0就是字符’A’的编码；")]),t._v(" "),e("li",[t._v("给定一系列字符并赋予对应的编码后，所有这些字符和编码对组成的集合就是字符集(Character Set)。例如，给定字符列表为{‘A’,’B’}时，{‘A’=>0, ‘B’=>1}就是一个字符集；")]),t._v(" "),e("li",[t._v("字符序(Collation)是指在同一字符集内字符之间的比较规则；")]),t._v(" "),e("li",[t._v("确定字符序后，才能在一个字符集上定义什么是等价的字符，以及字符之间的大小关系；")]),t._v(" "),e("li",[t._v("每个字符序唯一对应一种字符集，但一个字符集可以对应多种字符序，其中有一个是默认字符序(Default Collation)；")]),t._v(" "),e("li",[t._v("MySQL中的字符序名称遵从命名惯例：以字符序对应的字符集名称开头；以_ci(表示大小写不敏感，case insensitive)、_cs(表示大小写敏感，case sensitive)或_bin(表示按编码值比较，binary)结尾。例如：在字符序“utf8_general_ci”下，字符“a”和“A”是等价的；")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('mysql> show variables like "%colla%";\n+----------------------+-------------------+\n| Variable_name        | Value             |\n+----------------------+-------------------+\n| collation_connection | latin1_swedish_ci | \n| collation_database   | latin1_swedish_ci | \n| collation_server     | latin1_swedish_ci | \n+----------------------+-------------------+\n')])])]),e("p",[t._v("如果在MySQL连接时，出现了乱码的问题，那么基本可以确定是各个字符集/序设置不统一的原因。我们需要将需要关注的字符集和字符序都修改为utf8格式：")]),t._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token section"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("mysqld")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("character_set_server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("utf8")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("collation-server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("utf8_general_ci")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用该参数会忽略客户端传递的字符集信息，而直接使用服务端的设定")]),t._v("\nskip-character-set-client-handshake\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下面注释的几行可以不设置，但如果你的没有生效，也可以试试看")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#init_connect='SET NAMES utf8'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#[client]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#default-character-set=utf8")]),t._v("\n")])])]),e("h4",{attrs:{id:"参考-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考-3"}},[t._v("$")]),t._v(" 参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/u011791611/article/details/88183619",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL中文乱码解决方案"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/60605885",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL乱码的原因和设置UTF8数据格式"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.6/en/charset.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 5.6 Reference Manual  /  Character Sets, Collations, Unicode"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=s.exports}}]);