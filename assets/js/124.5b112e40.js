(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{533:function(e,a,r){"use strict";r.r(a);var t=r(10),o=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"命令行分析heapdump文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令行分析heapdump文件"}},[e._v("$")]),e._v(" 命令行分析HeapDump文件")]),e._v(" "),a("p",[e._v("在java程序遇到一些问题时，我们常常会把堆内存dump出来利用诸如Eclipse Memory Analyzer（MAT）这样的工具去分析。通常情况下dump文件可以在笔记本上运行MAT，但是遇到一些大内存的应用可能笔记本就分析不了了，这时候可以在服务器上用JDK自带的jhat命令，但是效率和效果都值得商榷；另一个办法就是使用MAT自带的"),a("code",[e._v("ParseHeapDump.sh")]),e._v("脚本来分析。")]),e._v(" "),a("h3",{attrs:{id:"使用方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用方法"}},[e._v("$")]),e._v(" 使用方法")]),e._v(" "),a("ol",[a("li",[e._v("下载MAT：https://www.eclipse.org/mat/")]),e._v(" "),a("li",[e._v("解压到服务器上")]),e._v(" "),a("li",[e._v("调整MemoryAnalyzer.ini配置文件中Xmx为合适大小（比如dump文件两倍）")]),e._v(" "),a("li",[e._v("执行脚本："),a("code",[e._v("./ParseHeapDump.sh {heap.dump.hprof} {分析项...}")])]),e._v(" "),a("li",[e._v("将dump文件的整个目录拷贝到本地，使用本地的MAT打开")])]),e._v(" "),a("p",[e._v("其中分析项包括：")]),e._v(" "),a("ul",[a("li",[e._v("org.eclipse.mat.api:suspects 内存泄露报告")]),e._v(" "),a("li",[e._v("org.eclipse.mat.api:overview 概述报告")]),e._v(" "),a("li",[e._v("org.eclipse.mat.api:top_components 大对象报告")])]),e._v(" "),a("h3",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("$")]),e._v(" 参考")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://wiki.eclipse.org/MemoryAnalyzer/FAQ",target:"_blank",rel:"noopener noreferrer"}},[e._v("MemoryAnalyzer/FAQ"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://stackoverflow.com/questions/7254017/tool-for-analyzing-large-java-heap-dumps",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tool for analyzing large Java heap dumps"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://colobu.com/2015/08/12/using-Eclipse-Memory-Analyzer-by-the-command-line/",target:"_blank",rel:"noopener noreferrer"}},[e._v("在命令行中使用Eclipse MAT工具"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=o.exports}}]);