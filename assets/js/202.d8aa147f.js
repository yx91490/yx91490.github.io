(window.webpackJsonp=window.webpackJsonp||[]).push([[202],{624:function(e,t,n){"use strict";n.r(t);var s=n(10),a=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"postgresql学习笔记"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#postgresql学习笔记"}},[e._v("$")]),e._v(" PostgreSQL学习笔记")]),e._v(" "),t("h2",{attrs:{id:"安装部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装部署"}},[e._v("$")]),e._v(" 安装部署")]),e._v(" "),t("p",[e._v("// TODO")]),e._v(" "),t("h2",{attrs:{id:"命令行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令行"}},[e._v("$")]),e._v(" 命令行")]),e._v(" "),t("h3",{attrs:{id:"psql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#psql"}},[e._v("$")]),e._v(" psql")]),e._v(" "),t("p",[e._v("使用帮助（"),t("code",[e._v("psql --help")]),e._v("）：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('psql is the PostgreSQL interactive terminal.\n\nUsage:\n  psql [OPTION]... [DBNAME [USERNAME]]\n\nGeneral options:\n  -c, --command=COMMAND    run only single command (SQL or internal) and exit\n  -d, --dbname=DBNAME      database name to connect to (default: "$(pwd)")\n  -f, --file=FILENAME      execute commands from file, then exit\n  -l, --list               list available databases, then exit\n  -v, --set=, --variable=NAME=VALUE\n                           set psql variable NAME to VALUE\n  -V, --version            output version information, then exit\n  -X, --no-psqlrc          do not read startup file (~/.psqlrc)\n  -1 ("one"), --single-transaction\n                           execute command file as a single transaction\n  -?, --help               show this help, then exit\n\nInput and output options:\n  -a, --echo-all           echo all input from script\n  -e, --echo-queries       echo commands sent to server\n  -E, --echo-hidden        display queries that internal commands generate\n  -L, --log-file=FILENAME  send session log to file\n  -n, --no-readline        disable enhanced command line editing (readline)\n  -o, --output=FILENAME    send query results to file (or |pipe)\n  -q, --quiet              run quietly (no messages, only query output)\n  -s, --single-step        single-step mode (confirm each query)\n  -S, --single-line        single-line mode (end of line terminates SQL command)\n\nOutput format options:\n  -A, --no-align           unaligned table output mode\n  -F, --field-separator=STRING\n                           set field separator (default: "|")\n  -H, --html               HTML table output mode\n  -P, --pset=VAR[=ARG]     set printing option VAR to ARG (see \\pset command)\n  -R, --record-separator=STRING\n                           set record separator (default: newline)\n  -t, --tuples-only        print rows only\n  -T, --table-attr=TEXT    set HTML table tag attributes (e.g., width, border)\n  -x, --expanded           turn on expanded table output\n  -z, --field-separator-zero\n                           set field separator to zero byte\n  -0, --record-separator-zero\n                           set record separator to zero byte\n\nConnection options:\n  -h, --host=HOSTNAME      database server host or socket directory (default: "local socket")\n  -p, --port=PORT          database server port (default: "5432")\n  -U, --username=USERNAME  database user name (default: "$(pwd)")\n  -w, --no-password        never prompt for password\n  -W, --password           force password prompt (should happen automatically)\n\nFor more information, type "\\?" (for internal commands) or "\\help" (for SQL\ncommands) from within psql, or consult the psql section in the PostgreSQL\ndocumentation.\n')])])]),t("p",[e._v("交互式命令行帮助：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('=> \\?\nGeneral\n  \\copyright             show PostgreSQL usage and distribution terms\n  \\g [FILE] or ;         execute query (and send results to file or |pipe)\n  \\h [NAME]              help on syntax of SQL commands, * for all commands\n  \\q                     quit psql\n\nQuery Buffer\n  \\e [FILE] [LINE]       edit the query buffer (or file) with external editor\n  \\ef [FUNCNAME [LINE]]  edit function definition with external editor\n  \\p                     show the contents of the query buffer\n  \\r                     reset (clear) the query buffer\n  \\s [FILE]              display history or save it to file\n  \\w FILE                write query buffer to file\n\nInput/Output\n  \\copy ...              perform SQL COPY with data stream to the client host\n  \\echo [STRING]         write string to standard output\n  \\i FILE                execute commands from file\n  \\ir FILE               as \\i, but relative to location of current script\n  \\o [FILE]              send all query results to file or |pipe\n  \\qecho [STRING]        write string to query output stream (see \\o)\n\nInformational\n  (options: S = show system objects, + = additional detail)\n  \\d[S+]                 list tables, views, and sequences\n  \\d[S+]  NAME           describe table, view, sequence, or index\n  \\da[S]  [PATTERN]      list aggregates\n  \\db[+]  [PATTERN]      list tablespaces\n  \\dc[S+] [PATTERN]      list conversions\n  \\dC[+]  [PATTERN]      list casts\n  \\dd[S]  [PATTERN]      show object descriptions not displayed elsewhere\n  \\ddp    [PATTERN]      list default privileges\n  \\dD[S+] [PATTERN]      list domains\n  \\det[+] [PATTERN]      list foreign tables\n  \\des[+] [PATTERN]      list foreign servers\n  \\deu[+] [PATTERN]      list user mappings\n  \\dew[+] [PATTERN]      list foreign-data wrappers\n  \\df[antw][S+] [PATRN]  list [only agg/normal/trigger/window] functions\n  \\dF[+]  [PATTERN]      list text search configurations\n  \\dFd[+] [PATTERN]      list text search dictionaries\n  \\dFp[+] [PATTERN]      list text search parsers\n  \\dFt[+] [PATTERN]      list text search templates\n  \\dg[+]  [PATTERN]      list roles\n  \\di[S+] [PATTERN]      list indexes\n  \\dl                    list large objects, same as \\lo_list\n  \\dL[S+] [PATTERN]      list procedural languages\n  \\dn[S+] [PATTERN]      list schemas\n  \\do[S]  [PATTERN]      list operators\n  \\dO[S+] [PATTERN]      list collations\n  \\dp     [PATTERN]      list table, view, and sequence access privileges\n  \\drds [PATRN1 [PATRN2]] list per-database role settings\n  \\ds[S+] [PATTERN]      list sequences\n  \\dt[S+] [PATTERN]      list tables\n  \\dT[S+] [PATTERN]      list data types\n  \\du[+]  [PATTERN]      list roles\n  \\dv[S+] [PATTERN]      list views\n  \\dE[S+] [PATTERN]      list foreign tables\n  \\dx[+]  [PATTERN]      list extensions\n  \\l[+]                  list all databases\n  \\sf[+] FUNCNAME        show a function\'s definition\n  \\z      [PATTERN]      same as \\dp\n\nFormatting\n  \\a                     toggle between unaligned and aligned output mode\n  \\C [STRING]            set table title, or unset if none\n  \\f [STRING]            show or set field separator for unaligned query output\n  \\H                     toggle HTML output mode (currently off)\n  \\pset NAME [VALUE]     set table output option\n                         (NAME := {format|border|expanded|fieldsep|fieldsep_zero|footer|null|\n                         numericlocale|recordsep|recordsep_zero|tuples_only|title|tableattr|pager})\n  \\t [on|off]            show only rows (currently off)\n  \\T [STRING]            set HTML <table> tag attributes, or unset if none\n  \\x [on|off|auto]       toggle expanded output (currently off)\n\nConnection\n  \\c[onnect] {[DBNAME|- USER|- HOST|- PORT|-] | conninfo}\n                         connect to new database (currently "xxx")\n  \\encoding [ENCODING]   show or set client encoding\n  \\password [USERNAME]   securely change the password for a user\n  \\conninfo              display information about current connection\n\nOperating System\n  \\cd [DIR]              change the current working directory\n  \\setenv NAME [VALUE]   set or unset environment variable\n  \\timing [on|off]       toggle timing of commands (currently off)\n  \\! [COMMAND]           execute command in shell or start interactive shell\n\nVariables\n  \\prompt [TEXT] NAME    prompt user to set internal variable\n  \\set [NAME [VALUE]]    set internal variable, or list all if no parameters\n  \\unset NAME            unset (delete) internal variable\n\nLarge Objects\n  \\lo_export LOBOID FILE\n  \\lo_import FILE [COMMENT]\n  \\lo_list\n  \\lo_unlink LOBOID      large object operations\n')])])]),t("p",[e._v("可用SQL语句：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Available help:\n  ABORT                            COMMENT                          DECLARE                          EXECUTE\n  ALTER AGGREGATE                  COMMIT                           DELETE                           EXPLAIN\n  ALTER COLLATION                  COMMIT PREPARED                  DISCARD                          FETCH\n  ALTER CONVERSION                 COPY                             DO                               GRANT\n  ALTER DATABASE                   CREATE AGGREGATE                 DROP AGGREGATE                   INSERT\n  ALTER DEFAULT PRIVILEGES         CREATE CAST                      DROP CAST                        LISTEN\n  ALTER DOMAIN                     CREATE COLLATION                 DROP COLLATION                   LOAD\n  ALTER EXTENSION                  CREATE CONVERSION                DROP CONVERSION                  LOCK\n  ALTER FOREIGN DATA WRAPPER       CREATE DATABASE                  DROP DATABASE                    MOVE\n  ALTER FOREIGN TABLE              CREATE DOMAIN                    DROP DOMAIN                      NOTIFY\n  ALTER FUNCTION                   CREATE EXTENSION                 DROP EXTENSION                   PREPARE\n  ALTER GROUP                      CREATE FOREIGN DATA WRAPPER      DROP FOREIGN DATA WRAPPER        PREPARE TRANSACTION\n  ALTER INDEX                      CREATE FOREIGN TABLE             DROP FOREIGN TABLE               REASSIGN OWNED\n  ALTER LANGUAGE                   CREATE FUNCTION                  DROP FUNCTION                    REINDEX\n  ALTER LARGE OBJECT               CREATE GROUP                     DROP GROUP                       RELEASE SAVEPOINT\n  ALTER OPERATOR                   CREATE INDEX                     DROP INDEX                       RESET\n  ALTER OPERATOR CLASS             CREATE LANGUAGE                  DROP LANGUAGE                    REVOKE\n  ALTER OPERATOR FAMILY            CREATE OPERATOR                  DROP OPERATOR                    ROLLBACK\n  ALTER ROLE                       CREATE OPERATOR CLASS            DROP OPERATOR CLASS              ROLLBACK PREPARED\n  ALTER SCHEMA                     CREATE OPERATOR FAMILY           DROP OPERATOR FAMILY             ROLLBACK TO SAVEPOINT\n  ALTER SEQUENCE                   CREATE ROLE                      DROP OWNED                       SAVEPOINT\n  ALTER SERVER                     CREATE RULE                      DROP ROLE                        SECURITY LABEL\n  ALTER TABLE                      CREATE SCHEMA                    DROP RULE                        SELECT\n  ALTER TABLESPACE                 CREATE SEQUENCE                  DROP SCHEMA                      SELECT INTO\n  ALTER TEXT SEARCH CONFIGURATION  CREATE SERVER                    DROP SEQUENCE                    SET\n  ALTER TEXT SEARCH DICTIONARY     CREATE TABLE                     DROP SERVER                      SET CONSTRAINTS\n  ALTER TEXT SEARCH PARSER         CREATE TABLE AS                  DROP TABLE                       SET ROLE\n  ALTER TEXT SEARCH TEMPLATE       CREATE TABLESPACE                DROP TABLESPACE                  SET SESSION AUTHORIZATION\n  ALTER TRIGGER                    CREATE TEXT SEARCH CONFIGURATION DROP TEXT SEARCH CONFIGURATION   SET TRANSACTION\n  ALTER TYPE                       CREATE TEXT SEARCH DICTIONARY    DROP TEXT SEARCH DICTIONARY      SHOW\n  ALTER USER                       CREATE TEXT SEARCH PARSER        DROP TEXT SEARCH PARSER          START TRANSACTION\n  ALTER USER MAPPING               CREATE TEXT SEARCH TEMPLATE      DROP TEXT SEARCH TEMPLATE        TABLE\n  ALTER VIEW                       CREATE TRIGGER                   DROP TRIGGER                     TRUNCATE\n  ANALYZE                          CREATE TYPE                      DROP TYPE                        UNLISTEN\n  BEGIN                            CREATE USER                      DROP USER                        UPDATE\n  CHECKPOINT                       CREATE USER MAPPING              DROP USER MAPPING                VACUUM\n  CLOSE                            CREATE VIEW                      DROP VIEW                        VALUES\n  CLUSTER                          DEALLOCATE                       END                              WITH\n")])])]),t("p",[e._v("常用语句：")]),e._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("-- 需切换到postgres用户执行")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("-- sudo su - postgres")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("-- psql -U <user> -d <database> -h 127.0.0.1")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("USER")]),e._v(" user1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WITH")]),e._v(" PASSWORD "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'password'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DATABASE")]),e._v(" db1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("GRANT")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ALL")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("PRIVILEGES")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DATABASE")]),e._v(" db1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("to")]),e._v(" user1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ALTER")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("USER")]),e._v(" user1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WITH")]),e._v(" PASSWORD "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'new_password'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),t("h3",{attrs:{id:"createdb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#createdb"}},[e._v("$")]),e._v(" createdb")]),e._v(" "),t("p",[e._v("使用帮助（"),t("code",[e._v("createdb --help")]),e._v("）：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("createdb creates a PostgreSQL database.\n\nUsage:\n  createdb [OPTION]... [DBNAME] [DESCRIPTION]\n\nOptions:\n  -D, --tablespace=TABLESPACE  default tablespace for the database\n  -e, --echo                   show the commands being sent to the server\n  -E, --encoding=ENCODING      encoding for the database\n  -l, --locale=LOCALE          locale settings for the database\n      --lc-collate=LOCALE      LC_COLLATE setting for the database\n      --lc-ctype=LOCALE        LC_CTYPE setting for the database\n  -O, --owner=OWNER            database user to own the new database\n  -T, --template=TEMPLATE      template database to copy\n  -V, --version                output version information, then exit\n  -?, --help                   show this help, then exit\n\nConnection options:\n  -h, --host=HOSTNAME          database server host or socket directory\n  -p, --port=PORT              database server port\n  -U, --username=USERNAME      user name to connect as\n  -w, --no-password            never prompt for password\n  -W, --password               force password prompt\n  --maintenance-db=DBNAME      alternate maintenance database\n\nBy default, a database with the same name as the current user is created.\n")])])]),t("p",[e._v("遗憾的是，没有办法实现语法：“CREATE DATABASE IF NOT EXISTS xxx”。")]),e._v(" "),t("h3",{attrs:{id:"dropdb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dropdb"}},[e._v("$")]),e._v(" dropdb")]),e._v(" "),t("p",[e._v("使用帮助（"),t("code",[e._v("dropdb --help")]),e._v("）：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("dropdb removes a PostgreSQL database.\n\nUsage:\n  dropdb [OPTION]... DBNAME\n\nOptions:\n  -e, --echo                show the commands being sent to the server\n  -i, --interactive         prompt before deleting anything\n  -V, --version             output version information, then exit\n  --if-exists               don't report error if database doesn't exist\n  -?, --help                show this help, then exit\n\nConnection options:\n  -h, --host=HOSTNAME       database server host or socket directory\n  -p, --port=PORT           database server port\n  -U, --username=USERNAME   user name to connect as\n  -w, --no-password         never prompt for password\n  -W, --password            force password prompt\n  --maintenance-db=DBNAME   alternate maintenance database\n")])])]),t("h3",{attrs:{id:"createuser"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#createuser"}},[e._v("$")]),e._v(" createuser")]),e._v(" "),t("p",[e._v("使用帮助（"),t("code",[e._v("createuser --help")]),e._v("）：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("createuser creates a new PostgreSQL role.\n\nUsage:\n  createuser [OPTION]... [ROLENAME]\n\nOptions:\n  -c, --connection-limit=N  connection limit for role (default: no limit)\n  -d, --createdb            role can create new databases\n  -D, --no-createdb         role cannot create databases (default)\n  -e, --echo                show the commands being sent to the server\n  -E, --encrypted           encrypt stored password\n  -i, --inherit             role inherits privileges of roles it is a\n                            member of (default)\n  -I, --no-inherit          role does not inherit privileges\n  -l, --login               role can login (default)\n  -L, --no-login            role cannot login\n  -N, --unencrypted         do not encrypt stored password\n  -P, --pwprompt            assign a password to new role\n  -r, --createrole          role can create new roles\n  -R, --no-createrole       role cannot create roles (default)\n  -s, --superuser           role will be superuser\n  -S, --no-superuser        role will not be superuser (default)\n  -V, --version             output version information, then exit\n  --interactive             prompt for missing role name and attributes rather\n                            than using defaults\n  --replication             role can initiate replication\n  --no-replication          role cannot initiate replication\n  -?, --help                show this help, then exit\n\nConnection options:\n  -h, --host=HOSTNAME       database server host or socket directory\n  -p, --port=PORT           database server port\n  -U, --username=USERNAME   user name to connect as (not the one to create)\n  -w, --no-password         never prompt for password\n  -W, --password            force password prompt\n")])])]),t("h3",{attrs:{id:"dropuser"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dropuser"}},[e._v("$")]),e._v(" dropuser")]),e._v(" "),t("p",[e._v("使用帮助（"),t("code",[e._v("dropuser --help")]),e._v("）：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("dropuser removes a PostgreSQL role.\n\nUsage:\n  dropuser [OPTION]... [ROLENAME]\n\nOptions:\n  -e, --echo                show the commands being sent to the server\n  -i, --interactive         prompt before deleting anything, and prompt for\n                            role name if not specified\n  -V, --version             output version information, then exit\n  --if-exists               don't report error if user doesn't exist\n  -?, --help                show this help, then exit\n\nConnection options:\n  -h, --host=HOSTNAME       database server host or socket directory\n  -p, --port=PORT           database server port\n  -U, --username=USERNAME   user name to connect as (not the one to drop)\n  -w, --no-password         never prompt for password\n  -W, --password            force password prompt\n")])])]),t("h2",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("$")]),e._v(" 参考")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.yiibai.com/postgresql",target:"_blank",rel:"noopener noreferrer"}},[e._v("PostgreSQL教程"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=a.exports}}]);