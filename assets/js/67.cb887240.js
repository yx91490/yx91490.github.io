(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{486:function(t,s,a){"use strict";a.r(s);var r=a(18),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"hiveql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hiveql"}},[t._v("$")]),t._v(" HiveQL")]),t._v(" "),s("h2",{attrs:{id:"hive的变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hive的变量"}},[t._v("$")]),t._v(" Hive的变量")]),t._v(" "),s("p",[t._v("Hive的变量前面有一个命名空间：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命名空间")]),t._v(" "),s("th",[t._v("可省略")]),t._v(" "),s("th",[t._v("使用权限")]),t._v(" "),s("th",[t._v("详细描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("hivevar")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("rw")]),t._v(" "),s("td",[t._v("用户自定义变量，通过--define k=v或者是--hivevar k=v来声明")])]),t._v(" "),s("tr",[s("td",[t._v("hiveconf")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("rw")]),t._v(" "),s("td",[t._v("hive-site.xml下面的配置变量值")])]),t._v(" "),s("tr",[s("td",[t._v("system")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("rw")]),t._v(" "),s("td",[t._v("系统变量，包括JVM的运行环境")])]),t._v(" "),s("tr",[s("td",[t._v("env")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("r")]),t._v(" "),s("td",[t._v("环境变量，包括Shell环境下的变量信息")])])])]),t._v(" "),s("h2",{attrs:{id:"dql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dql"}},[t._v("$")]),t._v(" DQL")]),t._v(" "),s("p",[t._v("利用正则表达式过滤列名：")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--其中col_name* 是指不要查询的列名。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("(col_name1|col_name2|col_name3)?+.+"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("支持的算术运算符：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("A+B,A-B,A*B,A/B,A%B,A|B,A^B,~A\n")])])]),s("h3",{attrs:{id:"数学函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数学函数"}},[t._v("$")]),t._v(" 数学函数")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("round(d),floor(d),log10(d),abs(d),sin(d)...\n")])])]),s("h3",{attrs:{id:"聚合函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#聚合函数"}},[t._v("$")]),t._v(" 聚合函数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("函数")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("count(*)")]),t._v(" "),s("td",[t._v("含有null的总行数")])]),t._v(" "),s("tr",[s("td",[t._v("count(expr)")]),t._v(" "),s("td",[t._v("提供expr表达式的非null行数")])]),t._v(" "),s("tr",[s("td",[t._v("count(distinct expr[,expr])")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("sum(distinct col)")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("avg(distinct col)")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("variance(col)")]),t._v(" "),s("td",[t._v("方差")])]),t._v(" "),s("tr",[s("td",[t._v("var_sampl(col)")]),t._v(" "),s("td",[t._v("样本方差")])]),t._v(" "),s("tr",[s("td",[t._v("stddev_pop(col)")]),t._v(" "),s("td",[t._v("标准差")])]),t._v(" "),s("tr",[s("td",[t._v("stddev_samp(col)")]),t._v(" "),s("td",[t._v("标准样本方差")])]),t._v(" "),s("tr",[s("td",[t._v("covar_pop(col)")]),t._v(" "),s("td",[t._v("协方差")])]),t._v(" "),s("tr",[s("td",[t._v("covar_samp(col)")]),t._v(" "),s("td",[t._v("样本协方差")])]),t._v(" "),s("tr",[s("td",[t._v("corr(col1, col2)")]),t._v(" "),s("td",[t._v("相关系数")])]),t._v(" "),s("tr",[s("td",[t._v("percentile(bigint expr, double p)")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("histogram_numeric(col, NB)")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("collect_set(col)")]),t._v(" "),s("td",[t._v("返回集合col元素排重后的数组")])])])]),t._v(" "),s("h3",{attrs:{id:"join"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#join"}},[t._v("$")]),t._v(" JOIN")]),t._v(" "),s("p",[t._v("Hive中除了支持和传统数据库中一样的内关联、左关联、右关联、全关联，还支持LEFT SEMI JOIN和CROSS JOIN，但这两种JOIN类型也可以用前面的代替：")]),t._v(" "),s("ul",[s("li",[t._v("JOIN")]),t._v(" "),s("li",[t._v("LEFT JOIN")]),t._v(" "),s("li",[t._v("RIGTH JOIN")]),t._v(" "),s("li",[t._v("FULL OUTER JOIN")]),t._v(" "),s("li",[t._v("Hive LEFT SEMI JOIN")]),t._v(" "),s("li",[t._v("Hive Cross Join")])]),t._v(" "),s("p",[s("strong",[t._v("注意")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("Hive中Join的关联键必须在ON ()中指定，不能在Where中指定，否则就会先做笛卡尔积，再过滤。")]),t._v(" "),s("li",[t._v("FULL JOIN时候，Hive不会使用MapJoin来优化。")])]),t._v(" "),s("h2",{attrs:{id:"dml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dml"}},[t._v("$")]),t._v(" DML")]),t._v(" "),s("h3",{attrs:{id:"装载数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#装载数据"}},[t._v("$")]),t._v(" 装载数据")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("LOAD")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DATA")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("LOCAL")]),t._v(" INPATH "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\nOVERWRITE "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" emploees\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("country"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'us'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("$")]),t._v(" 参考")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Syntax.1",target:"_blank",rel:"noopener noreferrer"}},[t._v("LanguageManualDML-Syntax.1"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"分区"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分区"}},[t._v("$")]),t._v(" 分区")]),t._v(" "),s("p",[t._v("您可以使用"),s("a",{attrs:{href:"https://dwgeek.com/apache-hive-alter-table-command-and-examples.html/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hive ALTER TABLE命令"),s("OutboundLink")],1),t._v("更改HDFS目录位置或添加新目录：")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" some_table "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("year")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2012")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" LOCATION "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hdfs://user/user1/some_table/2012'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("此命令不会移动旧数据，也不会删除旧数据。它只是将Hive表分区设置为新位置。")]),t._v(" "),s("h4",{attrs:{id:"删除或删除配置单元分区"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除或删除配置单元分区"}},[t._v("$")]),t._v(" 删除或删除配置单元分区")]),t._v(" "),s("p",[t._v("您可以使用带有DROP PARTITION选项的ALTER TABLE来删除表的分区。")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" some_table "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IF")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXISTS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("year")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2012")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("参考："),s("a",{attrs:{href:"https://dwgeek.com/how-to-update-or-drop-hive-partition-steps-and-examples.html/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to Update or Drop Hive Partition? Steps and Examples"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"动态分区"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#动态分区"}},[t._v("$")]),t._v(" 动态分区")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("PARTITION()")]),t._v("语句中必须列出所有分区字段。")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("INSERT ... SELECT ...")]),t._v("语句中，动态分区字段必须按照"),s("code",[t._v("PARTITION()")]),t._v("语句中的顺序排列在"),s("code",[t._v("SELECT")]),t._v("字段的最后。")]),t._v(" "),s("p",[t._v("所有分区字段都是动态分区字段（nonstrict模式生效）：")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dynamic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("partition")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dynamic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("partition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mode")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nonstrict"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" OVERWRITE "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" T "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hr "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" srcpart "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" ds "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("is")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" hr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("混合动态分区字段和静态分区字段（如果静态分区字段是动态分区字段的子分区将会抛出异常）：")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" OVERWRITE "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" T "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ds"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2010-03-03'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*ds,*/")]),t._v(" hr "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" srcpart "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" ds "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("is")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" hr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("多表插入：")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" S\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" OVERWRITE "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" T "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ds"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2010-03-03'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hr "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" srcpart "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" ds "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("is")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" hr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" OVERWRITE "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" R "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ds"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("'"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2010")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("03")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("03")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hr "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" srcpart "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" ds "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("is")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" hr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("code",[t._v("CreateTableAS")]),t._v("语句需要指定所有分区字段：")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" T "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" PARTITIONED "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ds string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hr "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" hr1 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" srcpart "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" ds "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("is")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" hr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"参考-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考-2"}},[t._v("$")]),t._v(" 参考")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://cwiki.apache.org/confluence/display/Hive/DynamicPartitions",target:"_blank",rel:"noopener noreferrer"}},[t._v("DynamicPartitions"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);