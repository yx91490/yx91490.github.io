(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{285:function(a,r,e){a.exports=e.p+"assets/img/yarn_no_resource.6097346b.png"},448:function(a,r,e){"use strict";e.r(r);var t=e(10),n=Object(t.a)({},(function(){var a=this,r=a._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h1",{attrs:{id:"yarn问题记录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#yarn问题记录"}},[a._v("$")]),a._v(" Yarn问题记录")]),a._v(" "),r("h2",{attrs:{id:"一个yarn资源分配失败的问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一个yarn资源分配失败的问题"}},[a._v("$")]),a._v(" 一个Yarn资源分配失败的问题")]),a._v(" "),r("p",[a._v("同事在一个三台节点的集群上运行Flink任务失败，报错日志：")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v("org.apache.flink.client.program.ProgramInvocationException: The main method caused an error: Could not deploy Yarn job cluster.\n")])])]),r("p",[a._v("排查后发现集群的vcore和memory全都为0，也没有可用节点：")]),a._v(" "),r("p",[r("img",{attrs:{src:e(285),alt:"yarn_no_resource"}})]),a._v(" "),r("p",[a._v("YarnUI "),r("code",[a._v("http://rmhost:8088/cluster/nodes/unhealthy")]),a._v("上的日志显示：")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v("1/1 local-dirs are bad: /yarn/nm; 1/1 log-dirs are bad: /yarn/container-logs\n")])])]),r("p",[a._v("后来发现是磁盘的使用率达到90%以上，超过了参数"),r("code",[a._v("yarn.nodemanager.disk-health-checker.max-disk-utilization-per-disk-percentage")]),a._v("的设置，没有可用的nodemanager导致的。")]),a._v(" "),r("p",[a._v("清理了下磁盘日志文件后恢复正常了。")]),a._v(" "),r("h3",{attrs:{id:"参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[a._v("$")]),a._v(" 参考")]),a._v(" "),r("p",[r("a",{attrs:{href:"https://community.cloudera.com/t5/Support-Questions/1-1-local-dirs-are-bad-yarn-nm-1-1-log-dirs-are-bad-yarn/td-p/145718",target:"_blank",rel:"noopener noreferrer"}},[a._v("1/1 local-dirs are bad: /yarn/nm; 1/1 log-dirs are bad: /yarn/container-logs"),r("OutboundLink")],1)])])}),[],!1,null,null,null);r.default=n.exports}}]);