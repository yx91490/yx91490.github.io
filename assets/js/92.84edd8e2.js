(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{615:function(t,n,r){"use strict";r.r(n);var s=r(10),c=Object(s.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"c语言qsort-函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#c语言qsort-函数"}},[t._v("$")]),t._v(" c语言qsort()函数")]),t._v(" "),n("p",[t._v("linux的man手册中提供了一个比较函数的示例：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('   #include <stdio.h>\n   #include <stdlib.h>\n   #include <string.h>\n\n   static int\n   cmpstringp(const void *p1, const void *p2)\n   {\n       /* The actual arguments to this function are "pointers to\n          pointers to char", but strcmp(3) arguments are "pointers\n          to char", hence the following cast plus dereference */\n\n       return strcmp(* (char * const *) p1, * (char * const *) p2);\n   }\n\n   int\n   main(int argc, char *argv[])\n   {\n       int j;\n\n       if (argc < 2) {\n           fprintf(stderr, "Usage: %s <string>...\\n", argv[0]);\n           exit(EXIT_FAILURE);\n       }\n\n       qsort(&argv[1], argc - 1, sizeof(char *), cmpstringp);\n\n       for (j = 1; j < argc; j++)\n           puts(argv[j]);\n       exit(EXIT_SUCCESS);\n   }\n')])])]),n("p",[t._v("一开始搞不懂return为什么是 * (char * const *) p1 ,后来看注释发现strcmp的原型是：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(" int strcmp(const char *s1, const char *s2);\n")])])]),n("p",[t._v("strcmp接受"),n("code",[t._v("const char *")]),t._v("的类型，因此先要把传来的参数p1强制转换成 "),n("code",[t._v("const char *")]),t._v(" 类型的指针，即 "),n("code",[t._v("const char **")]),t._v("，然后传递给 strcmp 作为引数，写成 "),n("code",[t._v("* (const char **) p1")]),t._v("，与"),n("code",[t._v("* (char * const *) p1")]),t._v("同义。\n但是网上的示例大多数return时并没有写的这样规范，而是写成"),n("code",[t._v("*（char*）p1")]),t._v(" 这种形式，编译时会有警告并且会自动去掉一个"),n("code",[t._v("*")]),t._v("，运行结果会出错。")])])}),[],!1,null,null,null);n.default=c.exports}}]);