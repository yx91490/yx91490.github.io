(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{572:function(e,r,t){"use strict";t.r(r);var o=t(10),s=Object(o.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"日志框架"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#日志框架"}},[e._v("$")]),e._v(" 日志框架")]),e._v(" "),r("h3",{attrs:{id:"常见问题总结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#常见问题总结"}},[e._v("$")]),e._v(" 常见问题总结")]),e._v(" "),r("ol",[r("li",[e._v("slf4j应该有且仅有一个绑定的日志框架.")]),e._v(" "),r("li",[e._v("通常slf4j的绑定是"),r("code",[e._v("slf4j-nop.jar")]),e._v(" "),r("code",[e._v("slf4j-simple.jar")]),e._v(","),r("code",[e._v("slf4j-log4j12.jar")]),e._v(", "),r("code",[e._v("slf4j-jdk14.jar")]),e._v(" , "),r("code",[e._v("logback-classic.jar")]),e._v("中的一个.")]),e._v(" "),r("li",[e._v("如果在classpath中找不到相应的绑定则会打印"),r("code",[e._v("Failed to load class org.slf4j.impl.StaticLoggerBinder")]),e._v("的异常;")]),e._v(" "),r("li",[e._v("如果有多于一个的绑定,则会打印"),r("code",[e._v("Multiple bindings were found on the class path")]),e._v("的异常")]),e._v(" "),r("li",[e._v("设置"),r("code",[e._v("slf4j.detectLoggerNameMismatch")]),e._v("系统属性检查logger名称不匹配的问题.")]),e._v(" "),r("li",[e._v("slf4j-api和相应的绑定包的版本应该保持一致.")]),e._v(" "),r("li",[r("code",[e._v("log4j-over-slf4j.jar")]),e._v("用来把对log4j的调用重定向到slf4j,和"),r("code",[e._v("slf4j-log4j12.jar")]),e._v("混用会导致"),r("code",[e._v("StackOverflowError")]),e._v(".")]),e._v(" "),r("li",[r("code",[e._v("jcl-over-slf4j.jar")]),e._v("用来把对JCL的调用重定向到slf4j,和"),r("code",[e._v("slf4j-jcl.jar")]),e._v("混用会导致"),r("code",[e._v("StackOverflowError")]),e._v(".")]),e._v(" "),r("li",[e._v("使用logback的时候，添加jul-to-slf4j`依赖将标准输出流重定向到日志中。")])]),e._v(" "),r("h4",{attrs:{id:"参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("$")]),e._v(" 参考")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("https://www.slf4j.org/codes.html")])]),e._v(" "),r("li",[r("p",[r("a",{attrs:{href:"https://stackoverflow.com/questions/39170008/how-to-redirect-system-out-to-a-log-file-using-logback",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to redirect System.out to a log file using Logback?"),r("OutboundLink")],1)])])]),e._v(" "),r("h3",{attrs:{id:"loggerfactory初始化过程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#loggerfactory初始化过程"}},[e._v("$")]),e._v(" LoggerFactory初始化过程")]),e._v(" "),r("ol",[r("li",[e._v("检查classpath中是否有多个staticLoggerBinder并警告")]),e._v(" "),r("li",[e._v("StaticLoggerBinder初始化")]),e._v(" "),r("li",[e._v("把状态置为"),r("code",[e._v("SUCCESSFUL_INITIALIZATION")])]),e._v(" "),r("li",[e._v("把SubstituteLogger委派给真实的logger")]),e._v(" "),r("li",[e._v("重演事件?")]),e._v(" "),r("li",[e._v("可能的检查logger名不一致")])]),e._v(" "),r("h3",{attrs:{id:"spi机制"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#spi机制"}},[e._v("$")]),e._v(" SPI机制")]),e._v(" "),r("p",[e._v("1.8版本的slf4j通过spi机制实现对具体日志框架的加载,避免了在slf4j-api包中去掉StaticLoggerBinder类的丑陋做法.")]),e._v(" "),r("p",[e._v("接口类是"),r("code",[e._v("org.slf4j.spi.SLF4JServiceProvider")]),e._v(",在绑定包中实现该接口,并在classpath的META-INFO/services/org.slf4j.spi.SLF4JServiceProvider文件中指明实现类的全类名.")])])}),[],!1,null,null,null);r.default=s.exports}}]);