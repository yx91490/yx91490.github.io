(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{619:function(t,a,s){"use strict";s.r(a);var e=s(17),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"spring"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring"}},[t._v("$")]),t._v(" Spring")]),t._v(" "),a("h2",{attrs:{id:"spring-boot官方文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot官方文档"}},[t._v("$")]),t._v(" Spring Boot官方文档")]),t._v(" "),a("p",[t._v("参考：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/2.0.4.RELEASE/reference/htmlsingle/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot Reference Guide"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"spring-boot开启debug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot开启debug"}},[t._v("$")]),t._v(" Spring Boot开启debug")]),t._v(" "),a("p",[t._v("应用程序启动报错：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. \n")])])]),a("p",[t._v("在application.properties配置文件中加入下面配置进行调试：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("debug=true\n")])])]),a("h2",{attrs:{id:"spring-boot自带执行脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot自带执行脚本"}},[t._v("$")]),t._v(" Spring Boot自带执行脚本")]),t._v(" "),a("p",[t._v("参考：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-tools/spring-boot-loader-tools/src/main/resources/org/springframework/boot/loader/tools/launch.script",target:"_blank",rel:"noopener noreferrer"}},[t._v("launch.script"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/1.3.x-SNAPSHOT/reference/html/deployment-install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("55. Installing Spring Boot applications"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"spring-boot向容器注册bean的多种方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot向容器注册bean的多种方式"}},[t._v("$")]),t._v(" Spring Boot向容器注册Bean的多种方式")]),t._v(" "),a("ul",[a("li",[t._v("通过@ComponentScan注册Bean")]),t._v(" "),a("li",[t._v("通过@Bean注册Bean")]),t._v(" "),a("li",[t._v("通过@Import注册Bean")])]),t._v(" "),a("p",[t._v('通过@ComponentScan注册Bean\nSpring容器会扫描@ComponentScan配置的包路径，找到标记@Component注解的类加入到Spring容器。效果等同于XML配置文件中的<context:component-scan base-package="包名">。java8之后一个类可以标记多个@ComponentScan扫描规则。')]),t._v(" "),a("h3",{attrs:{id:"通过-componentscan注册bean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过-componentscan注册bean"}},[t._v("$")]),t._v(" 通过@ComponentScan注册Bean")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("常用属性名")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("includeFilters")]),t._v(" "),a("td",[t._v("Filter[]")]),t._v(" "),a("td",[t._v("指定扫描导入类型的过滤规则")])]),t._v(" "),a("tr",[a("td",[t._v("excludeFilters")]),t._v(" "),a("td",[t._v("Filter[]")]),t._v(" "),a("td",[t._v("指定扫描排除类型的过滤规则")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td"),t._v(" "),a("td")])])]),t._v(" "),a("h4",{attrs:{id:"component说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#component说明"}},[t._v("$")]),t._v(" @Component说明")]),t._v(" "),a("p",[t._v("常见继承：")]),t._v(" "),a("ul",[a("li",[t._v("@Configuration：标记类为配置类，常与@ComponentScan或@Bean注解一起使用")]),t._v(" "),a("li",[t._v("@Controller")]),t._v(" "),a("li",[t._v("@Repository")]),t._v(" "),a("li",[t._v("@Service")])]),t._v(" "),a("h3",{attrs:{id:"通过-bean注册bean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过-bean注册bean"}},[t._v("$")]),t._v(" 通过@Bean注册Bean")]),t._v(" "),a("p",[t._v("标记在方法上，将方法返回值注册到Spring容器，类型为返回值类型，id默认为方法名。")]),t._v(" "),a("p",[t._v("效果等同于XML配置文件中的"),a("code",[t._v('<bean id="beanName" class="className"/>')])]),t._v(" "),a("h3",{attrs:{id:"通过-import注册bean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过-import注册bean"}},[t._v("$")]),t._v(" 通过@Import注册Bean")]),t._v(" "),a("p",[t._v("直接注册指定类：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动类")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImportTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RegistryBean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConfigurableApplicationContext")]),t._v(" context "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RegistryBean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" beanNames "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBeanDefinitionNames")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" beanName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" beanNames"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImportTest")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("配合ImportSelector接口注册指定类，同时修改启动类上注解"),a("code",[t._v("@Import({ ImportTest.class })")]),t._v("为"),a("code",[t._v("@Import({ ImportTest.class，ImportSelectorTest .class })")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImportSelectorTest")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImportSelector")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ImportSelector接口定义的方法")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Spring容器会传入当前标记@Import的类的全部注解元数据，用于读取注解中的配置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回需要注册的全类名，Spring容器会自动注册这些类")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意：不能返回null")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectImports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnnotationMetadata")]),t._v(" importingClassMetadata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回想要注册的全类名")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImportBeanTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImportBeanTest")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("配合ImportBeanDefinitionRegistrar接口注册指定类，同时修改启动类上注解"),a("code",[t._v("@Import({ ImportTest.class })")]),t._v("为"),a("code",[t._v("@Import({ ImportTest.class,ImportSelectorTest.class, ImportBeanDefinitionRegistrarTest.class })")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImportBeanDefinitionRegistrarTest")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImportBeanDefinitionRegistrar")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ImportBeanDefinitionRegistrar接口定义的方法")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Spring容器会传入当前标记@Import的类的全部注解元数据和Bean定义信息注册类")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Spring容器会按照注册类中注册的Bean定义信息进行实例化Bean组件")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerBeanDefinitions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnnotationMetadata")]),t._v(" importingClassMetadata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeanDefinitionRegistry")]),t._v(" registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 包装Bean定义信息并进行注册")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RootBeanDefinition")]),t._v(" beanDefinition "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RootBeanDefinition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerBeanDefinition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ImportBeanDefinitionRegistrar测试类"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" beanDefinition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("$")]),t._v(" 参考")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/weixin_38229356/article/details/80699973",target:"_blank",rel:"noopener noreferrer"}},[t._v("SpringBoot-向容器注册Bean的多种方式"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/catoop/article/details/50558333",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot 使用Java代码创建Bean并注册到Spring中"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"springboot配置静态资源缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springboot配置静态资源缓存"}},[t._v("$")]),t._v(" SpringBoot配置静态资源缓存")]),t._v(" "),a("p",[t._v("配置application.properties（核心类是"),a("code",[t._v("org.springframework.boot.autoconfigure.web.ResourceProperties")]),t._v("）：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 缓存1小时\nspring.resources.cache.cachecontrol.max-age=3600\n")])])]),a("h2",{attrs:{id:"spring加载配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring加载配置文件"}},[t._v("$")]),t._v(" Spring加载配置文件")]),t._v(" "),a("p",[t._v("Spring 提供了一个 ResourceUtils 工具类，它支持“classpath:”和“file:”的地址前缀，它能够从指定的地址加载文件资源：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('File f =  ResourceUtils.getFile("classpath:sqlscript/a.sql");\n')])])]),a("blockquote",[a("p",[t._v("注意： ResouceUtils.getFile()用来加载非压缩和Jar包文件类型的资源，要想加载Jar中的文件,只要用可以读取jar中文件的方式加载即可,比如 xxx.class.getClassLoader().getResouceAsStream()这种以流的形式读取文件的方式.")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('ClassPathResource resource = new ClassPathResource("myFile.txt");\nString filename = resource.getFilename();\nInputStream input = resource.getInputStream();\n')])])]),a("h3",{attrs:{id:"参考-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考-2"}},[t._v("$")]),t._v(" 参考")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chyu/p/8407541.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ResouceUtils.getFile()取不到Jar中资源文件源码小结"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/shuist_king/article/details/69664961",target:"_blank",rel:"noopener noreferrer"}},[t._v("spring的ResourceUtils工具类简单应用"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/baQiWangZhengLiang/article/details/84568846",target:"_blank",rel:"noopener noreferrer"}},[t._v("SpringBoot不要使用ResourceUtils读取资源文件"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.jianshu.com/p/e06534f307a4",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot使用ResourceUtils FileNotFoundException的一次采坑经历"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/liaoguanwang/p/9749995.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("SpringBoot web项目下读取classpath下的文件心得"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"springboot命令行注入属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springboot命令行注入属性"}},[t._v("$")]),t._v(" SpringBoot命令行注入属性")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("java -jar xxx.jar --server.port=8888\n")])])]),a("h2",{attrs:{id:"命令行运行指定的类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令行运行指定的类"}},[t._v("$")]),t._v(" 命令行运行指定的类")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootApplication")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"manual"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//确保default Profile下不会激活")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringBootConsoleApplication")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CommandLineRunner")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringApplication")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCBenchmark")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWebApplicationType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebApplicationType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NONE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("java -Dspring.profiles.active=manual -cp $classpath foo.MainClass arg1, arg2...\n")])])]),a("h2",{attrs:{id:"开启访问日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启访问日志"}},[t._v("$")]),t._v(" 开启访问日志")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# accesslog")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.basedir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("./")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Enable access log.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Whether to buffer output such that it is flushed only periodically.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.buffered")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Directory in which log files are created. Can be absolute or relative to the Tomcat base dir.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.directory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("logs")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Log file name prefix.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.prefix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("access_log")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Log file name suffix.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.suffix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v(".log")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Date format to place in the log file name.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.file-date-format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v(".yyyy-MM-dd")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Number of days to retain the access log files before they are removed.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.max-days")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("-1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Format pattern for access logs.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.pattern")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("common")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.rename-on-rotate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.request-attributes-enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.tomcat.accesslog.rotate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n")])])]),a("p",[t._v("Access log内置了两个日志格式模板：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("common")]),t._v(" - "),a("code",[t._v('%h %l %u %t "%r" %s %b')]),t._v("，依次为：远程主机名称，远程用户名，被认证的远程用户，日期和时间，请求的第一行，response code，发送的字节数")]),t._v(" "),a("li",[a("strong",[t._v("combined")]),t._v(" - "),a("code",[t._v('%h %l %u %t "%r" %s %b "%{Referer}i" "%{User-Agent}i"')]),t._v("，依次为：远程主机名称，远程用户名，被认证的远程用户，日期和时间，请求的第一行，response code，发送的字节数，request header的Referer信息，request header的User-Agent信息。")])]),t._v(" "),a("p",[t._v("pattern的配置：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("%a")]),t._v(" - Remote IP address，远程ip地址，注意不一定是原始ip地址，中间可能经过nginx等的转发")]),t._v(" "),a("li",[a("strong",[t._v("%A")]),t._v(" - Local IP address，本地ip")]),t._v(" "),a("li",[a("strong",[t._v("%b")]),t._v(" - Bytes sent, excluding HTTP headers, or '-' if no bytes were sent")]),t._v(" "),a("li",[a("strong",[t._v("%B")]),t._v(" - Bytes sent, excluding HTTP headers")]),t._v(" "),a("li",[a("strong",[t._v("%h")]),t._v(" - Remote host name (or IP address if "),a("code",[t._v("enableLookups")]),t._v(" for the connector is false)，远程主机名称(如果resolveHosts为false则展示IP)")]),t._v(" "),a("li",[a("strong",[t._v("%H")]),t._v(" - Request protocol，请求协议")]),t._v(" "),a("li",[a("strong",[t._v("%l")]),t._v(" - Remote logical username from identd (always returns '-')")]),t._v(" "),a("li",[a("strong",[t._v("%m")]),t._v(" - Request method，请求方法（GET，POST）")]),t._v(" "),a("li",[a("strong",[t._v("%p")]),t._v(" - Local port，接受请求的本地端口")]),t._v(" "),a("li",[a("strong",[t._v("%q")]),t._v(" - Query string (prepended with a '?' if it exists, otherwise an empty string")]),t._v(" "),a("li",[a("strong",[t._v("%r")]),t._v(" - First line of the request，HTTP请求的第一行（包括请求方法，请求的URI）")]),t._v(" "),a("li",[a("strong",[t._v("%s")]),t._v(" - HTTP status code of the response，HTTP的响应代码，如：200,404")]),t._v(" "),a("li",[a("strong",[t._v("%S")]),t._v(" - User session ID")]),t._v(" "),a("li",[a("strong",[t._v("%t")]),t._v(" - Date and time, in Common Log Format format，日期和时间，Common Log Format格式")]),t._v(" "),a("li",[a("strong",[t._v("%u")]),t._v(" - Remote user that was authenticated")]),t._v(" "),a("li",[a("strong",[t._v("%U")]),t._v(" - Requested URL path")]),t._v(" "),a("li",[a("strong",[t._v("%v")]),t._v(" - Local server name")]),t._v(" "),a("li",[a("strong",[t._v("%D")]),t._v(" - Time taken to process the request, in millis，处理请求的时间，单位毫秒")]),t._v(" "),a("li",[a("strong",[t._v("%T")]),t._v(" - Time taken to process the request, in seconds，处理请求的时间，单位秒")]),t._v(" "),a("li",[a("strong",[t._v("%I")]),t._v(" - current Request thread name (can compare later with stacktraces)，当前请求的线程名，可以和打印的log对比查找问题")])]),t._v(" "),a("p",[t._v("参考：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://tomcat.apache.org/tomcat-8.5-doc/config/valve.html#Access_Logging",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apache Tomcat 8 Configuration Reference"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Common Application properties"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/shamo89/p/8134865.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("springboot中配置tomcat的access log"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"参考-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考-3"}},[t._v("$")]),t._v(" 参考")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/wuxinshui/p/10983942.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Springboot 命令注入属性"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sping Doc - Common Application properties"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://stackoverflow.com/questions/29344313/prevent-application-commandlinerunner-classes-from-executing-during-junit-test",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prevent Application / CommandLineRunner classes from executing during JUnit testing"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://stackoverflow.com/questions/26105061/spring-boot-without-the-web-server",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot without the web server"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://stackoverflow.com/questions/52778546/how-can-i-run-a-specific-class-utility-in-a-spring-boot-application-with-wirin",target:"_blank",rel:"noopener noreferrer"}},[t._v("How can I run a specific class / utility in a Spring Boot application with wiring?"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);