<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Impala | yx91490的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.webp">
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QQHZM2VLM0');
window.addEventListener('load', function(){ var s = document.createElement('script'); s.src = "https://www.googletagmanager.com/gtag/js?id=G-QQHZM2VLM0"; document.body.appendChild(s); });</script>
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?6781d2ac2dff1f3b278518419b4d4deb";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <meta name="description" content="java, 大数据(hadoop, sqoop, kylin, zeppelin)相关技术, 工作经验记录">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="google-site-verification" content="j1Gm2ZeMV3D7mPiI08fpx91dEOSlhCAJjD4vy_pSroQ">
    <meta name="baidu-site-verification" content="4z2bGbjYMB">
    
    <link rel="preload" href="/assets/css/0.styles.003598ab.css" as="style"><link rel="preload" href="/assets/js/app.a2246195.js" as="script"><link rel="preload" href="/assets/js/2.a92520c9.js" as="script"><link rel="preload" href="/assets/js/71.edff7b32.js" as="script"><link rel="prefetch" href="/assets/js/10.9266ea66.js"><link rel="prefetch" href="/assets/js/100.be2d6fa9.js"><link rel="prefetch" href="/assets/js/101.6bf96f53.js"><link rel="prefetch" href="/assets/js/102.b9123862.js"><link rel="prefetch" href="/assets/js/103.3393f6b3.js"><link rel="prefetch" href="/assets/js/104.684c4331.js"><link rel="prefetch" href="/assets/js/105.50f83af8.js"><link rel="prefetch" href="/assets/js/106.af1be028.js"><link rel="prefetch" href="/assets/js/107.03a88e14.js"><link rel="prefetch" href="/assets/js/108.3c9beac7.js"><link rel="prefetch" href="/assets/js/109.1cc12551.js"><link rel="prefetch" href="/assets/js/11.abfb5926.js"><link rel="prefetch" href="/assets/js/110.6496c428.js"><link rel="prefetch" href="/assets/js/111.441b5c62.js"><link rel="prefetch" href="/assets/js/112.c176e7aa.js"><link rel="prefetch" href="/assets/js/113.22b25ffa.js"><link rel="prefetch" href="/assets/js/114.0470f0e2.js"><link rel="prefetch" href="/assets/js/115.133edcde.js"><link rel="prefetch" href="/assets/js/116.5de552b8.js"><link rel="prefetch" href="/assets/js/117.17a14c4a.js"><link rel="prefetch" href="/assets/js/118.c79d4a77.js"><link rel="prefetch" href="/assets/js/119.3a636690.js"><link rel="prefetch" href="/assets/js/12.274720a3.js"><link rel="prefetch" href="/assets/js/120.41a0252a.js"><link rel="prefetch" href="/assets/js/121.18dd56cb.js"><link rel="prefetch" href="/assets/js/122.dcc6fff9.js"><link rel="prefetch" href="/assets/js/123.3e8dd2b0.js"><link rel="prefetch" href="/assets/js/124.c469f9a0.js"><link rel="prefetch" href="/assets/js/125.eb8238e4.js"><link rel="prefetch" href="/assets/js/126.c8b54275.js"><link rel="prefetch" href="/assets/js/127.a9895d7f.js"><link rel="prefetch" href="/assets/js/128.ad16504e.js"><link rel="prefetch" href="/assets/js/129.673ac57e.js"><link rel="prefetch" href="/assets/js/13.473bd291.js"><link rel="prefetch" href="/assets/js/130.9e56a52b.js"><link rel="prefetch" href="/assets/js/131.5423b009.js"><link rel="prefetch" href="/assets/js/132.6438550e.js"><link rel="prefetch" href="/assets/js/133.083d70f2.js"><link rel="prefetch" href="/assets/js/134.80f4d86d.js"><link rel="prefetch" href="/assets/js/135.0368a605.js"><link rel="prefetch" href="/assets/js/136.65c70e71.js"><link rel="prefetch" href="/assets/js/137.676f7436.js"><link rel="prefetch" href="/assets/js/138.d3c68759.js"><link rel="prefetch" href="/assets/js/139.f163f9ac.js"><link rel="prefetch" href="/assets/js/14.4157d143.js"><link rel="prefetch" href="/assets/js/140.0eb4db22.js"><link rel="prefetch" href="/assets/js/141.91c9c472.js"><link rel="prefetch" href="/assets/js/142.ac3a9a62.js"><link rel="prefetch" href="/assets/js/143.156c5dd3.js"><link rel="prefetch" href="/assets/js/144.9117b752.js"><link rel="prefetch" href="/assets/js/145.bf4177dc.js"><link rel="prefetch" href="/assets/js/146.a4e70b4c.js"><link rel="prefetch" href="/assets/js/147.e7503515.js"><link rel="prefetch" href="/assets/js/148.550bb88e.js"><link rel="prefetch" href="/assets/js/149.a3efa6a5.js"><link rel="prefetch" href="/assets/js/15.78885f92.js"><link rel="prefetch" href="/assets/js/150.2b8684be.js"><link rel="prefetch" href="/assets/js/151.723ee132.js"><link rel="prefetch" href="/assets/js/152.2e61447b.js"><link rel="prefetch" href="/assets/js/153.a87224a2.js"><link rel="prefetch" href="/assets/js/154.45b73d0e.js"><link rel="prefetch" href="/assets/js/155.2a158d8e.js"><link rel="prefetch" href="/assets/js/156.6d290334.js"><link rel="prefetch" href="/assets/js/157.dc0ac8e3.js"><link rel="prefetch" href="/assets/js/158.ad8be92a.js"><link rel="prefetch" href="/assets/js/159.17aa0be5.js"><link rel="prefetch" href="/assets/js/16.e9de9925.js"><link rel="prefetch" href="/assets/js/160.f1c672b5.js"><link rel="prefetch" href="/assets/js/161.fced35d3.js"><link rel="prefetch" href="/assets/js/162.14034b66.js"><link rel="prefetch" href="/assets/js/163.b7b22626.js"><link rel="prefetch" href="/assets/js/164.c979848e.js"><link rel="prefetch" href="/assets/js/165.f3b605f4.js"><link rel="prefetch" href="/assets/js/166.31241d54.js"><link rel="prefetch" href="/assets/js/167.99665073.js"><link rel="prefetch" href="/assets/js/168.73a40652.js"><link rel="prefetch" href="/assets/js/169.c6b27f11.js"><link rel="prefetch" href="/assets/js/17.8b238f2d.js"><link rel="prefetch" href="/assets/js/170.9356cc22.js"><link rel="prefetch" href="/assets/js/171.f8f9eeeb.js"><link rel="prefetch" href="/assets/js/172.31967fe5.js"><link rel="prefetch" href="/assets/js/173.6dc70b37.js"><link rel="prefetch" href="/assets/js/174.bad7f12b.js"><link rel="prefetch" href="/assets/js/175.03194976.js"><link rel="prefetch" href="/assets/js/176.5c7853ba.js"><link rel="prefetch" href="/assets/js/177.fc5d3911.js"><link rel="prefetch" href="/assets/js/178.1b8f2927.js"><link rel="prefetch" href="/assets/js/179.7e2010d2.js"><link rel="prefetch" href="/assets/js/18.be942caa.js"><link rel="prefetch" href="/assets/js/180.7fc4904d.js"><link rel="prefetch" href="/assets/js/181.3aa48343.js"><link rel="prefetch" href="/assets/js/182.0da27206.js"><link rel="prefetch" href="/assets/js/183.ea56bc10.js"><link rel="prefetch" href="/assets/js/184.1ba34ef7.js"><link rel="prefetch" href="/assets/js/185.ef514255.js"><link rel="prefetch" href="/assets/js/186.10a22983.js"><link rel="prefetch" href="/assets/js/187.24412415.js"><link rel="prefetch" href="/assets/js/188.9e67f04e.js"><link rel="prefetch" href="/assets/js/189.1a001954.js"><link rel="prefetch" href="/assets/js/19.41661090.js"><link rel="prefetch" href="/assets/js/190.938fd53d.js"><link rel="prefetch" href="/assets/js/191.6036e1aa.js"><link rel="prefetch" href="/assets/js/192.20aaab8b.js"><link rel="prefetch" href="/assets/js/193.1b7ea98e.js"><link rel="prefetch" href="/assets/js/194.1170ccd0.js"><link rel="prefetch" href="/assets/js/195.2da46799.js"><link rel="prefetch" href="/assets/js/196.8c38b115.js"><link rel="prefetch" href="/assets/js/197.c1f360eb.js"><link rel="prefetch" href="/assets/js/198.ab460869.js"><link rel="prefetch" href="/assets/js/199.58b8a906.js"><link rel="prefetch" href="/assets/js/20.7dbafc6d.js"><link rel="prefetch" href="/assets/js/200.a9de3e1c.js"><link rel="prefetch" href="/assets/js/201.9c11ec9b.js"><link rel="prefetch" href="/assets/js/202.31a20041.js"><link rel="prefetch" href="/assets/js/203.561fefc2.js"><link rel="prefetch" href="/assets/js/204.e044c696.js"><link rel="prefetch" href="/assets/js/205.4d437cf2.js"><link rel="prefetch" href="/assets/js/206.074913eb.js"><link rel="prefetch" href="/assets/js/207.f582a2d4.js"><link rel="prefetch" href="/assets/js/208.34c09bd0.js"><link rel="prefetch" href="/assets/js/21.4e3c7f50.js"><link rel="prefetch" href="/assets/js/22.cda475a6.js"><link rel="prefetch" href="/assets/js/23.6677c452.js"><link rel="prefetch" href="/assets/js/24.2e483650.js"><link rel="prefetch" href="/assets/js/25.32b8e5f5.js"><link rel="prefetch" href="/assets/js/26.c63edd69.js"><link rel="prefetch" href="/assets/js/27.6462a4d2.js"><link rel="prefetch" href="/assets/js/28.39745e0d.js"><link rel="prefetch" href="/assets/js/29.3ce79aa0.js"><link rel="prefetch" href="/assets/js/3.cd488c94.js"><link rel="prefetch" href="/assets/js/30.c3c07fa8.js"><link rel="prefetch" href="/assets/js/31.b441fe2c.js"><link rel="prefetch" href="/assets/js/32.9d627aa9.js"><link rel="prefetch" href="/assets/js/33.0a131b8b.js"><link rel="prefetch" href="/assets/js/34.e589c02b.js"><link rel="prefetch" href="/assets/js/35.b905220f.js"><link rel="prefetch" href="/assets/js/36.1451544a.js"><link rel="prefetch" href="/assets/js/37.8e64b501.js"><link rel="prefetch" href="/assets/js/38.ac5585b7.js"><link rel="prefetch" href="/assets/js/39.b7d08e4d.js"><link rel="prefetch" href="/assets/js/4.76c12804.js"><link rel="prefetch" href="/assets/js/40.1e627739.js"><link rel="prefetch" href="/assets/js/41.296baa8a.js"><link rel="prefetch" href="/assets/js/42.e762bf53.js"><link rel="prefetch" href="/assets/js/43.0c8916ee.js"><link rel="prefetch" href="/assets/js/44.fb27d611.js"><link rel="prefetch" href="/assets/js/45.a5c6e285.js"><link rel="prefetch" href="/assets/js/46.c00ec7b1.js"><link rel="prefetch" href="/assets/js/47.924f6a63.js"><link rel="prefetch" href="/assets/js/48.da552f4a.js"><link rel="prefetch" href="/assets/js/49.d4b2e85f.js"><link rel="prefetch" href="/assets/js/5.43a1b6a5.js"><link rel="prefetch" href="/assets/js/50.b0cbb861.js"><link rel="prefetch" href="/assets/js/51.d53173dc.js"><link rel="prefetch" href="/assets/js/52.cec22911.js"><link rel="prefetch" href="/assets/js/53.856b0cbd.js"><link rel="prefetch" href="/assets/js/54.a949b4ab.js"><link rel="prefetch" href="/assets/js/55.8b1c4821.js"><link rel="prefetch" href="/assets/js/56.075464d0.js"><link rel="prefetch" href="/assets/js/57.edeffd0c.js"><link rel="prefetch" href="/assets/js/58.f17ca774.js"><link rel="prefetch" href="/assets/js/59.83a509b9.js"><link rel="prefetch" href="/assets/js/6.8c8eb26f.js"><link rel="prefetch" href="/assets/js/60.b2ac681b.js"><link rel="prefetch" href="/assets/js/61.06292aef.js"><link rel="prefetch" href="/assets/js/62.efb1d9ca.js"><link rel="prefetch" href="/assets/js/63.c621ff20.js"><link rel="prefetch" href="/assets/js/64.fd7d869b.js"><link rel="prefetch" href="/assets/js/65.d6e18805.js"><link rel="prefetch" href="/assets/js/66.8e4764ed.js"><link rel="prefetch" href="/assets/js/67.39c5f354.js"><link rel="prefetch" href="/assets/js/68.01631967.js"><link rel="prefetch" href="/assets/js/69.21c55f66.js"><link rel="prefetch" href="/assets/js/7.811e798c.js"><link rel="prefetch" href="/assets/js/70.d93f9ac4.js"><link rel="prefetch" href="/assets/js/72.58f44a0d.js"><link rel="prefetch" href="/assets/js/73.945f295a.js"><link rel="prefetch" href="/assets/js/74.8ca95c7a.js"><link rel="prefetch" href="/assets/js/75.2bda719a.js"><link rel="prefetch" href="/assets/js/76.160188c6.js"><link rel="prefetch" href="/assets/js/77.13d44a5c.js"><link rel="prefetch" href="/assets/js/78.bc9b4703.js"><link rel="prefetch" href="/assets/js/79.51f0cbe9.js"><link rel="prefetch" href="/assets/js/8.b01cfa02.js"><link rel="prefetch" href="/assets/js/80.d5ee7d7e.js"><link rel="prefetch" href="/assets/js/81.a8cb1bb1.js"><link rel="prefetch" href="/assets/js/82.f2466831.js"><link rel="prefetch" href="/assets/js/83.42e24b89.js"><link rel="prefetch" href="/assets/js/84.f11efdd6.js"><link rel="prefetch" href="/assets/js/85.dfb94ac5.js"><link rel="prefetch" href="/assets/js/86.b722d02e.js"><link rel="prefetch" href="/assets/js/87.50dfa4f1.js"><link rel="prefetch" href="/assets/js/88.1f1be810.js"><link rel="prefetch" href="/assets/js/89.9c872859.js"><link rel="prefetch" href="/assets/js/9.6643bf27.js"><link rel="prefetch" href="/assets/js/90.b45fd9d8.js"><link rel="prefetch" href="/assets/js/91.abf3f5f6.js"><link rel="prefetch" href="/assets/js/92.c4da0439.js"><link rel="prefetch" href="/assets/js/93.ee4705d1.js"><link rel="prefetch" href="/assets/js/94.b5887f79.js"><link rel="prefetch" href="/assets/js/95.1950dbcb.js"><link rel="prefetch" href="/assets/js/96.7fbdc57f.js"><link rel="prefetch" href="/assets/js/97.4e371474.js"><link rel="prefetch" href="/assets/js/98.acbe433f.js"><link rel="prefetch" href="/assets/js/99.358cb13a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.003598ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">yx91490的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/java/" class="nav-link">
  Java开发
</a></div><div class="nav-item"><a href="/bigdata/" class="nav-link router-link-active">
  大数据
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="contactMe" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="contactMe" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sql/" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/clang/" class="nav-link">
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/diagram/" class="nav-link">
  图示速查
</a></li><li class="dropdown-item"><!----> <a href="/collection/" class="nav-link">
  资料收藏
</a></li><li class="dropdown-item"><!----> <a href="/cs/" class="nav-link">
  计算机科学
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/yx91490" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/yx91490/yx91490.github.io/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  给我留言
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/java/" class="nav-link">
  Java开发
</a></div><div class="nav-item"><a href="/bigdata/" class="nav-link router-link-active">
  大数据
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="contactMe" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="contactMe" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sql/" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/clang/" class="nav-link">
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/diagram/" class="nav-link">
  图示速查
</a></li><li class="dropdown-item"><!----> <a href="/collection/" class="nav-link">
  资料收藏
</a></li><li class="dropdown-item"><!----> <a href="/cs/" class="nav-link">
  计算机科学
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/yx91490" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/yx91490/yx91490.github.io/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  给我留言
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Zeppelin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/zeppelin/heart_diease_dataset.html" class="sidebar-link">心脏病预测数据</a></li><li><a href="/bigdata/zeppelin/zeppelin_bugs.html" class="sidebar-link">zeppelin使用趟坑</a></li><li><a href="/bigdata/zeppelin/zeppelin_sharding.html" class="sidebar-link">Zeppelin v0.8分片方案</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Calcite</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/calcite/calcite.html" class="sidebar-link">Apache Calcite学习笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>DataX</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/datax/datax.html" class="sidebar-link">DataX源码学习笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Waterdrop</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/waterdrop/waterdrop.html" class="sidebar-link">Waterdrop学习笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Kylin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/kylin/awesome_kylin.html" class="sidebar-link">Kylin学习资料汇总</a></li><li><a href="/bigdata/kylin/read_kylin_source.html" class="sidebar-link">阅读Kylin源码</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Sqoop</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/sqoop/sqoop_usage.html" class="sidebar-link">代码调试</a></li><li><a href="/bigdata/sqoop/sqoop_hcatalog.html" class="sidebar-link">sqoopHCatalog使用</a></li><li><a href="/bigdata/sqoop/sqoop_mysql_temp_file.html" class="sidebar-link">sqoop导入导致MySQL产生大临时文件问题排查</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ZooKeeper</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/zookeeper/zookeeper.html" class="sidebar-link">ZooKeeper笔记</a></li><li><a href="/bigdata/zookeeper/zookeeper_user.html" class="sidebar-link">ZooKeeper管理员指南</a></li><li><a href="/bigdata/zookeeper/zk_distribute_lock.html" class="sidebar-link">zookeeper实现分布式锁</a></li><li><a href="/bigdata/zookeeper/isbn9787111524311_note.html" class="sidebar-link">《ZooKeeper分布式过程协同技术详解》笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Hadoop</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/hadoop/hadoop_interview.html" class="sidebar-link">Hadoop面试题</a></li><li><a href="/bigdata/hadoop/port.html" class="sidebar-link">Hadoop默认端口</a></li><li><a href="/bigdata/hadoop/hdfs_user.html" class="sidebar-link">HDFS命令笔记</a></li><li><a href="/bigdata/hadoop/hdfs_issue.html" class="sidebar-link">HDFS Issue</a></li><li><a href="/bigdata/hadoop/distcp.html" class="sidebar-link">Distcp命令</a></li><li><a href="/bigdata/hadoop/columnar_storage_parquet_orc.html" class="sidebar-link">列式存储（parquet,orc）</a></li><li><a href="/bigdata/hadoop/avro_specification_1.8.1.html" class="sidebar-link">avro格式规范1.8.1翻译</a></li><li><a href="/bigdata/hadoop/yarn.html" class="sidebar-link">Yarn</a></li><li><a href="/bigdata/hadoop/yarn_cli.html" class="sidebar-link">Yarn Cli命令</a></li><li><a href="/bigdata/hadoop/mapreduce.html" class="sidebar-link">MapReduce</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Hive</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/hive/hive_cli.html" class="sidebar-link">Beeline命令行</a></li><li><a href="/bigdata/hive/hive_src.html" class="sidebar-link">Hive源码分析</a></li><li><a href="/bigdata/hive/hive_ql.html" class="sidebar-link">HiveQL</a></li><li><a href="/bigdata/hive/hive_data_type.html" class="sidebar-link">Hive数据类型</a></li><li><a href="/bigdata/hive/hive_bucket.html" class="sidebar-link">Hive分桶</a></li><li><a href="/bigdata/hive/hive_principle.html" class="sidebar-link">Hive原理</a></li><li><a href="/bigdata/hive/hive_optimize.html" class="sidebar-link">Hive优化</a></li><li><a href="/bigdata/hive/hive_parse_json.html" class="sidebar-link">Hive解析json数组</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>OLAP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/olap/olap.html" class="sidebar-link">OLAP笔记</a></li><li><a href="/bigdata/olap/data_analyze.html" class="sidebar-link">数据分析笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ClickHouse</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/clickhouse/clickhouse.html" class="sidebar-link">ClickHouse学习笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Doris</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/doris/doris.html" class="sidebar-link">Doris笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Kudu</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/kudu/kudu.html" class="sidebar-link">Kudu</a></li><li><a href="/bigdata/kudu/kudu_paper.html" class="sidebar-link">Kudu: Storage for Fast Analytics on Fast Data</a></li><li><a href="/bigdata/kudu/kudu_paper_translation.html" class="sidebar-link">【译】Kudu论文</a></li><li><a href="/bigdata/kudu/kudu_note.html" class="sidebar-link">Kudu笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Impala</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/impala/cup.html" class="sidebar-link">CUP学习笔记</a></li><li><a href="/bigdata/impala/impala.html" aria-current="page" class="active sidebar-link">Impala</a></li><li><a href="/bigdata/impala/impala_admin.html" class="sidebar-link">Impala运维</a></li><li><a href="/bigdata/impala/impala_dev.html" class="sidebar-link">Impala开发笔记</a></li><li><a href="/bigdata/impala/impala_community.html" class="sidebar-link">Impala社区</a></li><li><a href="/bigdata/impala/impala_issues.html" class="sidebar-link">Impala问题记录</a></li><li><a href="/bigdata/impala/impala_paper_translation.html" class="sidebar-link">【转】【译】Impala：Hadoop上的一个现代开源SQL引擎</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Spark</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/spark/spark.html" class="sidebar-link">Spark</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HBase</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/hbase/hbase_interview.html" class="sidebar-link">HBase</a></li><li><a href="/bigdata/hbase/hbase_user.html" class="sidebar-link">HBase使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata/note/oss_note.html" class="sidebar-link">《快手短视频打造高稳定千亿级别对象存储平台》笔记</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="impala"><a href="#impala" class="header-anchor">$</a> Impala</h1> <h2 id="端口"><a href="#端口" class="header-anchor">$</a> 端口</h2> <table><thead><tr><th>客户端</th> <th>端口</th></tr></thead> <tbody><tr><td>impala-shell, ODBC driver</td> <td>21000</td></tr> <tr><td>JDBC, ODBC driver</td> <td>21050</td></tr></tbody></table> <h2 id="jdbc连接方式"><a href="#jdbc连接方式" class="header-anchor">$</a> JDBC连接方式</h2> <ol><li><p>使用Cloudera JDBC Connector<code>com.cloudera.impala.jdbc41.Driver</code>，连接串格式：</p> <div class="language- extra-class"><pre><code>jdbc:impala://Host:Port[/Schema];Property1=Value;Property2=Value;...
</code></pre></div></li> <li><p>使用Hive JDBC Driver<code>org.apache.hive.jdbc.HiveDriver</code>：</p> <ol><li><p>简单连接串（注意21050端口号后面的“/”，以及“;auth=noSasl”，缺少会出错）：</p> <div class="language- extra-class"><pre><code>jdbc:hive2://myhost.example.com:21050/;auth=noSasl
</code></pre></div></li> <li><p>kerberos连接串：</p> <div class="language- extra-class"><pre><code>jdbc:hive2://myhost.example.com:21050/;principal=impala/myhost.example.com@H2.EXAMPLE.COM
</code></pre></div></li> <li><p>LDAP连接串：</p> <div class="language- extra-class"><pre><code>jdbc:hive2://host:port/db_name;user=ldap_userid;password=ldap_password
</code></pre></div></li></ol></li></ol> <p>参考：</p> <ul><li><p><a href="https://docs.cloudera.com/documentation/enterprise/latest/topics/impala_jdbc1.html#impala_jdbc" target="_blank" rel="noopener noreferrer">Configuring Impala to Work with JDBC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://docs.cloudera.com/documentation/enterprise/5-15-x/topics/impala_shell_options.html" target="_blank" rel="noopener noreferrer">impala-shell Configuration Options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://docs.cloudera.com/documentation/enterprise/5-15-x/topics/impala_connecting.html#connecting" target="_blank" rel="noopener noreferrer">Connecting to impalad through impala-shell<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="http://impala.apache.org/docs/build/impala-2.12.pdf" target="_blank" rel="noopener noreferrer">Apache Impala Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://docs.cloudera.com/documentation/other/connectors/impala-jdbc/2-5-5/Cloudera-JDBC-Driver-for-Impala-Install-Guide-2-5-5.pdf" target="_blank" rel="noopener noreferrer">Cloudera JDBC Driver 2.5.5 for Impala<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://docs.cloudera.com/documentation/other/connectors/impala-jdbc/2-6-15/Cloudera-JDBC-Driver-for-Impala-Release-Notes.pdf" target="_blank" rel="noopener noreferrer">Cloudera JDBC Driver for Impala 2.6.15<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="负载均衡"><a href="#负载均衡" class="header-anchor">$</a> 负载均衡</h2> <p>负载均衡主要适用于<code>impalad</code>进程。</p> <p>负载均衡有下面的优势：</p> <ol><li><p>应用程序只需要连接到一个地址</p></li> <li><p>实现高可用连接</p></li> <li><p>coordinator节点比其他节点需要更多CPU和内存。代理服务器可以调度查询从而使每个连接使用不同的coordinator节点。</p></li></ol> <p>选择负载均衡算法：</p> <h6 id="leastconn"><a href="#leastconn" class="header-anchor">$</a> Leastconn</h6> <p>使用最少的连接将会话连接到coordinator节点，通常用于由许多独立的，短期运行的查询。</p> <h6 id="source-ip-persistence"><a href="#source-ip-persistence" class="header-anchor">$</a> Source IP Persistence</h6> <p>来自相同IP地址的会话始终会到达相同的协调器。对于混合着查询和DDL语句的情况是一个不错的选择，例如<code>CREATE TABLE</code> 和 <code>ALTER TABLE</code>。由于DDL语句中的元数据更改需要花费时间才能在整个群集中传播，因此在这种情况下，最好使用<code>Source IP Persistence</code>算法。如果无法选择<code>Source IP Persistence</code>，请通过同一会话运行DDL和依赖于DDL结果的后续查询，例如通过运行<code>impala-shell -f script_file</code> 通过一个会话提交多个语句。</p> <h6 id="round-robin"><a href="#round-robin" class="header-anchor">$</a> Round-robin</h6> <p>将连接分布到所有coordinator节点，通常不建议用于Impala。</p> <p>你可能需要执行基准测试和负载测试，以确定哪个设置对你的用例是最优的。总是使用两种负载平衡算法：Hue使用<code>Source IP Persistence</code>，其他的场景使用<code>Leastconn</code>。</p> <h3 id="参考"><a href="#参考" class="header-anchor">$</a> 参考</h3> <p><a href="https://docs.cloudera.com/documentation/enterprise/latest/topics/impala_proxy.html" target="_blank" rel="noopener noreferrer">Using Impala through a Proxy for High Availability<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="账号授权"><a href="#账号授权" class="header-anchor">$</a> 账号授权</h2> <p>SHOW语句与权限相关语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> ROLES
<span class="token keyword">SHOW</span> <span class="token keyword">CURRENT</span> ROLES
<span class="token keyword">SHOW</span> ROLE <span class="token keyword">GRANT</span> <span class="token keyword">GROUP</span> group_name
<span class="token keyword">SHOW</span> <span class="token keyword">GRANT</span> ROLE role_name

<span class="token keyword">SHOW</span> <span class="token keyword">GRANT</span> <span class="token keyword">USER</span> user_name
<span class="token keyword">SHOW</span> <span class="token keyword">GRANT</span> <span class="token keyword">USER</span> user_name <span class="token keyword">ON</span> SERVER
<span class="token keyword">SHOW</span> <span class="token keyword">GRANT</span> <span class="token keyword">USER</span> user_name <span class="token keyword">ON</span> <span class="token keyword">DATABASE</span> database_name
<span class="token keyword">SHOW</span> <span class="token keyword">GRANT</span> <span class="token keyword">USER</span> user_name <span class="token keyword">ON</span> <span class="token keyword">TABLE</span> table_name
<span class="token keyword">SHOW</span> <span class="token keyword">GRANT</span> <span class="token keyword">USER</span> user_name <span class="token keyword">ON</span> URI uri
</code></pre></div><p>GRANT语句语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">GRANT</span> ROLE role_name <span class="token keyword">TO</span> <span class="token keyword">GROUP</span> group_name

<span class="token keyword">GRANT</span> privilege <span class="token keyword">ON</span> object_type object_name
   <span class="token keyword">TO</span> <span class="token punctuation">[</span>ROLE<span class="token punctuation">]</span> roleName
   <span class="token punctuation">[</span><span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">]</span>

privilege ::<span class="token operator">=</span> <span class="token keyword">ALL</span> <span class="token operator">|</span> <span class="token keyword">CREATE</span> <span class="token operator">|</span> <span class="token keyword">INSERT</span> <span class="token operator">|</span> REFRESH <span class="token operator">|</span> <span class="token keyword">SELECT</span> <span class="token operator">|</span> <span class="token keyword">SELECT</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span>
object_type ::<span class="token operator">=</span> SERVER <span class="token operator">|</span> URI <span class="token operator">|</span> <span class="token keyword">DATABASE</span> <span class="token operator">|</span> <span class="token keyword">TABLE</span>
</code></pre></div><p>REVOKE语句语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">REVOKE</span> ROLE role_name <span class="token keyword">FROM</span> <span class="token keyword">GROUP</span> group_name

<span class="token keyword">REVOKE</span> <span class="token punctuation">[</span><span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span> <span class="token keyword">FOR</span><span class="token punctuation">]</span> privilege <span class="token keyword">ON</span> object_type object_name
  <span class="token keyword">FROM</span> <span class="token punctuation">[</span>ROLE<span class="token punctuation">]</span> role_name

privilege ::<span class="token operator">=</span> <span class="token keyword">ALL</span> <span class="token operator">|</span> <span class="token keyword">CREATE</span> <span class="token operator">|</span> <span class="token keyword">INSERT</span> <span class="token operator">|</span> REFRESH <span class="token operator">|</span> <span class="token keyword">SELECT</span> <span class="token operator">|</span> <span class="token keyword">SELECT</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span>

object_type ::<span class="token operator">=</span> SERVER <span class="token operator">|</span> URI <span class="token operator">|</span> <span class="token keyword">DATABASE</span> <span class="token operator">|</span> <span class="token keyword">TABLE</span>
</code></pre></div><p>兼容性：</p> <p>不需要HDFS权限</p> <p>Kudu注意事项：</p> <ol><li><p>仅在Server上有ALL权限的用户可以创建外部Kudu表</p></li> <li><p>DELETE, UPDATE, 和 UPSERT 操作要求ALL权限</p></li></ol> <p>参考：</p> <p><a href="https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/impala_grant.html" target="_blank" rel="noopener noreferrer">GRANT Statement (CDH 5.2 or higher only)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="数据类型"><a href="#数据类型" class="header-anchor">$</a> 数据类型</h2> <table><thead><tr><th>类型</th> <th>范围</th> <th>备注</th></tr></thead> <tbody><tr><td>TINYINT</td> <td>-128 .. 127</td> <td></td></tr> <tr><td>SMALLINT</td> <td>-32768 .. 32767</td> <td></td></tr> <tr><td>INT</td> <td>-2147483648 .. 2147483647</td> <td></td></tr> <tr><td>BIGINT</td> <td>-9223372036854775808 .. 9223372036854775807</td> <td></td></tr> <tr><td>FLOAT</td> <td>正负1.40129846432481707e-45 .. 3.40282346638528860e+38</td> <td></td></tr> <tr><td>DOUBLE,REAL</td> <td>4.94065645841246544e-324d .. 1.79769313486231570e+308</td> <td></td></tr> <tr><td>DECIMAL[(precision[, scale])]</td> <td>precision:between 1 and 38(default 9)scale:default 0</td> <td></td></tr> <tr><td>STRING</td> <td>2 GB</td> <td></td></tr> <tr><td>CHAR</td> <td></td> <td></td></tr> <tr><td>VARCHAR</td> <td></td> <td></td></tr> <tr><td>TIMESTAMP</td> <td>1400-01-01 to 9999-12-31</td> <td>UTC时区</td></tr> <tr><td>BOOLEAN</td> <td></td> <td></td></tr></tbody></table> <p>类型转换：</p> <table><thead><tr><th></th> <th>TINYINT</th> <th>SMALLINT</th> <th>INT</th> <th>BIGINT</th> <th>FLOAT</th> <th>DOUBLE</th> <th>DECIMAL</th> <th>STRING</th> <th>CHAR</th> <th>VARCHAR</th> <th>TIMESTAMP</th> <th>BOOLEAN</th></tr></thead> <tbody><tr><td>TINYINT</td> <td>-</td> <td>Auto</td> <td>Auto</td> <td>Auto</td> <td>Auto</td> <td>Auto</td> <td></td> <td>Cast</td> <td></td> <td></td> <td>Cast</td> <td></td></tr> <tr><td>SMALLINT</td> <td>Cast</td> <td>-</td> <td>Auto</td> <td>Auto</td> <td>Auto</td> <td>Auto</td> <td></td> <td>Cast</td> <td></td> <td></td> <td>Cast</td> <td></td></tr> <tr><td>INT</td> <td>Cast</td> <td>Cast</td> <td>-</td> <td>Auto</td> <td>Auto</td> <td>Auto</td> <td></td> <td>Cast</td> <td></td> <td></td> <td>Cast</td> <td></td></tr> <tr><td>BIGINT</td> <td>Cast</td> <td>Cast</td> <td></td> <td>-</td> <td>Auto</td> <td>Auto</td> <td></td> <td>Cast</td> <td></td> <td></td> <td>Cast</td> <td></td></tr> <tr><td>FLOAT</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td>-</td> <td>Auto</td> <td>No</td> <td>Cast</td> <td></td> <td></td> <td>Cast</td> <td>Cast</td></tr> <tr><td>DOUBLE</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td>-</td> <td>No</td> <td>Cast</td> <td></td> <td></td> <td>Cast</td> <td>Cast</td></tr> <tr><td>DECIMAL</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td>Auto</td> <td>Auto</td> <td>-</td> <td>Cast</td> <td></td> <td></td> <td>Cast</td> <td>Cast</td></tr> <tr><td>STRING</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td>Cast</td> <td></td> <td>-</td> <td></td> <td></td> <td>Auto</td> <td>No</td></tr> <tr><td>CHAR</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td>-</td> <td></td> <td></td> <td></td></tr> <tr><td>VARCHAR</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td>-</td> <td></td> <td></td></tr> <tr><td>TIMESTAMP</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td>-</td> <td></td></tr> <tr><td>BOOLEAN</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td>Cast</td> <td></td> <td></td> <td></td> <td>-</td></tr></tbody></table> <p>参考：</p> <p><a href="https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/impala_conversion_functions.html" target="_blank" rel="noopener noreferrer">Impala Type Conversion Functions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="query-option"><a href="#query-option" class="header-anchor">$</a> Query Option</h2> <table><thead><tr><th>名称</th> <th>适用角色</th> <th>标签</th> <th>默认值</th> <th>候选值</th> <th>说明</th></tr></thead> <tbody><tr><td>ABORT_JAVA_UDF_ON_EXCEPTION</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ABORT_ON_DEFAULT_LIMIT_EXCEEDED</td> <td></td> <td>Removed</td> <td></td> <td></td> <td></td></tr> <tr><td>ABORT_ON_ERROR</td> <td></td> <td></td> <td>false</td> <td></td> <td>When this option is enabled, Impala cancels a query immediately when any of the nodes encounters an error, rather than continuing and possibly returning incomplete results.</td></tr> <tr><td>ALLOW_ERASURE_CODED_FILES</td> <td></td> <td>@since 3.1</td> <td>false</td> <td></td> <td>When the ALLOW_ERASURE_CODED_FILES query option is set to FALSE, Impala returns an error when a query requires scanning an erasure coded file.</td></tr> <tr><td>ALLOW_UNSUPPORTED_FORMATS</td> <td></td> <td>Removed</td> <td></td> <td></td> <td></td></tr> <tr><td>ANALYTIC_RANK_PUSHDOWN_THRESHOLD</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>APPX_COUNT_DISTINCT</td> <td></td> <td>@since 2.0</td> <td>false</td> <td></td> <td>When the <code>APPX_COUNT_DISTINCT</code> query option is set to <code>TRUE</code>, Impala implicitly converts <code>COUNT(DISTINCT)</code> operations to the <code>NDV()</code> function calls.</td></tr> <tr><td>ASYNC_CODEGEN</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>BATCH_SIZE</td> <td></td> <td>@since 2.11</td> <td>0(1024)</td> <td>0-65536</td> <td>Number of rows evaluated at a time by SQL operators.Using a large number improves responsiveness, especially for scan operations, at the cost of a higher memory footprint.</td></tr> <tr><td>BROADCAST_BYTES_LIMIT</td> <td></td> <td></td> <td>34359738368 (32 GB)</td> <td>0:ignored</td> <td>The Impala planner may in rare cases make a bad choice to broadcast a large table or intermediate result and encounter performance problems due to high memory pressure. Setting this limit will make the planner pick a partition based hash join instead of broadcast and avoid such performance problems.</td></tr> <tr><td>BROADCAST_TO_PARTITION_FACTOR</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>BUFFER_POOL_LIMIT</td> <td></td> <td></td> <td>the lower of 80% of the <code>MEM_LIMIT</code> setting, or the <code>MEM_LIMIT</code> setting minus 100 MB.</td> <td>-- Set an absolute value. set buffer_pool_limit=8GB;  -- Set a relative value based on the MEM_LIMIT setting. set buffer_pool_limit=80%;</td> <td>Defines a limit on the amount of memory that a query can allocate from the internal buffer pool. The value for this limit applies to the memory on each host, not the aggregate memory across the cluster. Typically not changed by users, except during diagnosis of out-of-memory errors during queries.</td></tr> <tr><td>CLIENT_IDENTIFIER</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>COMPRESSION_CODEC</td> <td></td> <td></td> <td>SNAPPY</td> <td>SET COMPRESSION_CODEC=codec_name; // Supported for all codecs. SET COMPRESSION_CODEC=codec_name:compression_level; // Only supported for ZSTD.The allowed values for this query option are <code>SNAPPY</code> (the default), <code>GZIP</code>, <code>ZSTD</code>, <code>LZ4</code>, and <code>NONE</code>.</td> <td>When Impala writes Parquet data files using the <code>INSERT</code> statement, the underlying compression is controlled by the <code>COMPRESSION_CODEC</code> query option.</td></tr> <tr><td>COMPUTE_COLUMN_MINMAX_STATS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>COMPUTE_STATS_MIN_SAMPLE_SIZE</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>CONVERT_LEGACY_HIVE_PARQUET_UTC_TIMESTAMPS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>CPU_LIMIT_S</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>DEBUG_ACTION</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>DECIMAL_V2</td> <td></td> <td></td> <td></td> <td>A query option that changes behavior related to the DECIMAL data type. Set this option to FALSE for backward compatibility to Impala 2.x.</td> <td></td></tr> <tr><td>DEFAULT_FILE_FORMAT</td> <td></td> <td></td> <td>@since 3.2</td> <td>TEXT (0)RC_FILE (1)SEQUENCE_FILE (2)AVRO (3)PARQUET (4)KUDU (5)ORC (6)</td> <td>Use the DEFAULT_FILE_FORMAT query option to set the default table file format.</td></tr> <tr><td>DEFAULT_HINTS_INSERT_STATEMENT</td> <td></td> <td></td> <td>none</td> <td>SET DEFAULT_HINTS_INSERT_STATEMENT=CLUSTERED; SET DEFAULT_HINTS_INSERT_STATEMENT=SHUFFLE; SET DEFAULT_HINTS_INSERT_STATEMENT=NOCLUSTERED:NOSHUFFLE;</td> <td>The DEFAULT_HINTS_INSERT_STATEMENT query option sets the default hints for the INSERT statements with no optimizer hint specified.The default hints apply to the HDFS and Kudu table formats and are ignored for the HBase table format.</td></tr> <tr><td>DEFAULT_JOIN_DISTRIBUTION_MODE</td> <td></td> <td></td> <td></td> <td><code>BROADCAST</code> (equivalent to 0) or <code>SHUFFLE</code> (equivalent to 1)</td> <td>This option determines the join distribution that Impala uses when any of the tables involved in a join query is missing statistics.</td></tr> <tr><td>DEFAULT_NDV_SCALE</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>DEFAULT_ORDER_BY_LIMIT</td> <td></td> <td>Removed</td> <td></td> <td></td> <td></td></tr> <tr><td>DEFAULT_SPILLABLE_BUFFER_SIZE</td> <td></td> <td>@since 2.10.0</td> <td><code>2097152</code> (2 MB)</td> <td></td> <td>Specifies the default size for a memory buffer used when the spill-to-disk mechanism is activated.</td></tr> <tr><td>DEFAULT_TRANSACTIONAL_TYPE</td> <td></td> <td>@since 3.3</td> <td>NONE</td> <td><code>NONE</code>: The table will not be created as transactional. <code>INSERT_ONLY</code>: The table will be created as transactional.</td> <td>Use the DEFAULT_TRANSACTIONAL_TYPE query option to create insert-only transactional tables by default.If either table properties, <code>transactional</code> or <code>transactional_properties</code>, are set, this query option is ignored.</td></tr> <tr><td>DELETE_STATS_IN_TRUNCATE</td> <td></td> <td>@since 4.0</td> <td>TRUE</td> <td></td> <td>This query option DELETE_STATS_IN_TRUNCATE can be used to delete or retain table statistics.</td></tr> <tr><td>DISABLE_CACHED_READS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>DISABLE_CODEGEN</td> <td></td> <td></td> <td>false</td> <td></td> <td>it's used to work around any issues with Impala's runtime code generation</td></tr> <tr><td>DISABLE_CODEGEN_ROWS_THRESHOLD</td> <td></td> <td>@since 2.10.0</td> <td>50000</td> <td></td> <td>This setting controls the cutoff point (in terms of number of rows processed per Impala daemon) below which Impala disables native code generation for the whole query.If a query uses the complex data types STRUCT, ARRAY, or MAP, then codegen is never automatically disabled regardless of the DISABLE_CODEGEN_ROWS_THRESHOLD setting.</td></tr> <tr><td>DISABLE_DATA_CACHE</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>DISABLE_HBASE_NUM_ROWS_ESTIMATE</td> <td></td> <td></td> <td>FALSE</td> <td></td> <td>While generating a plan for an HBase query, the planner samples the underlying HBase tables to estimate their row count and row size, and the sampling can negatively impact the planning time. When the HBase table stats does not change much in short time, disable the sampling by setting the DISABLE_HBASE_NUM_ROWS_ESTIMATE query option to TRUE. And Impala planner will fall back to using Hive Metastore (HMS) table stats instead.</td></tr> <tr><td>DISABLE_HDFS_NUM_ROWS_ESTIMATE</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>DISABLE_OUTERMOST_TOPN</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>DISABLE_ROW_RUNTIME_FILTERING</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>DISABLE_STREAMING_PREAGGREGATIONS</td> <td></td> <td></td> <td>false</td> <td></td> <td>Turns off the &quot;streaming preaggregation&quot; optimization that is available in Impala 2.5 and higher.</td></tr> <tr><td>DISABLE_UNSAFE_SPILLS</td> <td></td> <td></td> <td>false</td> <td></td> <td>Enable this option if you prefer to have queries fail when they exceed the Impala memory limit, rather than write temporary data to disk.</td></tr> <tr><td>ENABLE_ASYNC_DDL_EXECUTION</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ENABLE_ASYNC_LOAD_DATA_EXECUTION</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ENABLE_CNF_REWRITES</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ENABLE_DISTINCT_SEMI_JOIN_OPTIMIZATION</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ENABLE_EXPR_REWRITES</td> <td></td> <td></td> <td>true</td> <td></td> <td>The ENABLE_EXPR_REWRITES query option controls whether to enable or disable the query compile time optimizations.</td></tr> <tr><td>ENABLE_KUDU_TRANSACTION</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ENABLE_OUTER_JOIN_TO_INNER_TRANSFORMATION</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ENABLE_REPLAN</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ENABLED_RUNTIME_FILTER_TYPES</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>EXEC_SINGLE_NODE_ROWS_THRESHOLD</td> <td></td> <td>@since 2.10</td> <td>100</td> <td></td> <td>This setting controls the cutoff point (in terms of number of rows scanned) below which Impala treats a query as a &quot;small&quot; query, turning off optimizations such as parallel execution and native code generation.This setting applies to queries where the number of rows processed can be accurately determined, either through table and column statistics, or by the presence of a <code>LIMIT</code> clause. If Impala cannot accurately estimate the number of rows, then this setting does not apply.For a query that is determined to be &quot;small&quot;, all work is performed on the coordinator node.</td></tr> <tr><td>EXEC_TIME_LIMIT_S</td> <td></td> <td>@since 2.12</td> <td>0 (no time limit )</td> <td></td> <td>The EXEC_TIME_LIMIT_S query option sets a time limit on query execution.The time limit only starts once the query is executing. Time spent planning the query, scheduling the query, or in admission control is not counted towards the execution time limit.</td></tr> <tr><td>EXPAND_COMPLEX_TYPES</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>EXPLAIN_LEVEL</td> <td></td> <td></td> <td>1</td> <td>0 or MINIMAL, 1 or STANDARD, 2 or EXTENDED, 3 or VERBOSE</td> <td>Controls the amount of detail provided in the output of the EXPLAIN statement.</td></tr> <tr><td>FETCH_ROWS_TIMEOUT_MS</td> <td></td> <td>@since 3.4</td> <td>10000</td> <td></td> <td>Use the FETCH_ROWS_TIMEOUT_MS query option to control how long Impala waits for query results when clients fetch rows.</td></tr> <tr><td>HBASE_CACHE_BLOCKS</td> <td></td> <td></td> <td>false</td> <td></td> <td>Setting this option is equivalent to calling the setCacheBlocks method of the class org.apache.hadoop.hbase.client.Scan, in an HBase Java application.</td></tr> <tr><td>HBASE_CACHING</td> <td></td> <td></td> <td>0</td> <td></td> <td>Setting this option is equivalent to calling the setCaching method of the class org.apache.hadoop.hbase.client.Scan, in an HBase Java application.</td></tr> <tr><td>IDLE_SESSION_TIMEOUT</td> <td></td> <td>@since 2.12</td> <td>0</td> <td></td> <td>The <code>IDLE_SESSION_TIMEOUT</code> query option sets the time in seconds after which an idle session is cancelled. A session is idle when no activity is occurring for any of the queries in that session, and the session has not started any new queries. Once a session is expired, you cannot issue any new query requests to it. The session remains open, but the only operation you can perform is to close it.</td></tr> <tr><td>JOIN_ROWS_PRODUCED_LIMIT</td> <td></td> <td>@since 4.0</td> <td>0</td> <td></td> <td>The JOIN_ROWS_PRODUCED_LIMIT query option limits the number of join rows produced by a join node and is used to prevent runaway join queries.</td></tr> <tr><td>KUDU_READ_MODE</td> <td></td> <td>@since 3.1</td> <td>DEFAULT</td> <td>&quot;DEFAULT&quot;&quot;READ_LATEST&quot;&quot;READ_AT_SNAPSHOT&quot;</td> <td>The <code>KUDU_READ_MODE</code> query option allows you to set a desired consistency level for scans of Kudu tables.</td></tr> <tr><td>KUDU_REPLICA_SELECTION</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>KUDU_SNAPSHOT_READ_TIMESTAMP_MICROS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>LOCK_MAX_WAIT_TIME_S</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>LIVE_PROGRESS</td> <td></td> <td>@since 2.3.0</td> <td>TRUE</td> <td></td> <td>When you run a query, the live progress bar appears in the output of a query. The bar shows roughly the percentage of completed processing. When the query finishes, the live progress bar disappears from the console output.Starting in Impala 3.1, the summary output also includes the queuing status consisting of whether the query was queued and what was the latest queuing reason.</td></tr> <tr><td>LIVE_SUMMARY</td> <td></td> <td>@since 2.3.0</td> <td>FALSE</td> <td></td> <td>Impala displays the same output as the <code>SUMMARY</code> command for queries submitted through the impala-shell command, with the measurements updated in real time as the query progresses. When the query finishes, the final <code>SUMMARY</code> output remains visible in the impala-shell console output.</td></tr> <tr><td>MAX_CNF_EXPRS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MAX_ERRORS</td> <td></td> <td></td> <td>0 (meaning 1000 errors)</td> <td></td> <td>Maximum number of non-fatal errors for any particular query that are recorded in the Impala log file.</td></tr> <tr><td>MAX_FS_WRITERS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MAX_IO_BUFFERS</td> <td></td> <td>Removed</td> <td></td> <td></td> <td></td></tr> <tr><td>MAX_MEM_ESTIMATE_FOR_ADMISSION</td> <td></td> <td>@since 3.1</td> <td></td> <td></td> <td>Use the <code>MAX_MEM_ESTIMATE_FOR_ADMISSION</code> query option to set an upper limit on the memory estimates of a query as a workaround for over-estimates precluding a query from being admitted.</td></tr> <tr><td>MAX_NUM_RUNTIME_FILTERS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MAX_RESULT_SPOOLING_MEM</td> <td></td> <td>@since 3.4</td> <td>100 MB</td> <td></td> <td>Use the <code>MAX_RESULT_SPOOLING_MEM</code> query option to set the maximum amount of memory used when spooling query results.If the amount of memory exceeds this value when spooling query results, all memory will most likely be spilled to disk.The <code>MAX_RESULT_SPOOLING_MEM</code> query option is applicable only when query result spooling is enabled with the <code>SPOOL_QUERY_RESULTS</code> query option set to <code>TRUE</code>.</td></tr> <tr><td>MAX_ROW_SIZE</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MAX_SCAN_RANGE_LENGTH</td> <td></td> <td></td> <td>0(indicates backend default, which is the same as the HDFS block size for each table.)</td> <td></td> <td>The <code>MAX_RESULT_SPOOLING_MEM</code> query option is applicable only when query result spooling is enabled with the <code>SPOOL_QUERY_RESULTS</code> query option set to <code>TRUE</code>.</td></tr> <tr><td>MAX_SPILLED_RESULT_SPOOLING_MEM</td> <td></td> <td>@since 3.4</td> <td>1 GB</td> <td></td> <td>Use the <code>MAX_SPILLED_RESULT_SPOOLING_MEM</code> query option to set the maximum amount of memory that can be spilled when spooling query results.</td></tr> <tr><td>MAX_STATEMENT_LENGTH_BYTES</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MEM_LIMIT</td> <td></td> <td></td> <td>0 (unlimited)</td> <td></td> <td>The MEM_LIMIT query option defines the maximum amount of memory a query can allocate on each node.</td></tr> <tr><td>MEM_LIMIT_EXECUTORS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MIN_SPILLABLE_BUFFER_SIZE</td> <td></td> <td>@since 2.10.0</td> <td><code>65536</code> (64 KB)</td> <td></td> <td>Specifies the minimum size for a memory buffer used when the spill-to-disk mechanism is activated, for example for queries against a large table with no statistics, or large join operations.</td></tr> <tr><td>MINMAX_FILTER_FAST_CODE_PATH</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MINMAX_FILTER_PARTITION_COLUMNS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MINMAX_FILTER_SORTED_COLUMNS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MINMAX_FILTER_THRESHOLD</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MINMAX_FILTERING_LEVEL</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>MT_DOP</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>NOW_STRING</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>NUM_NODES</td> <td></td> <td></td> <td>0</td> <td>0 (meaning all nodes) or 1 (meaning all work is done on the coordinator node)</td> <td>Limit the number of nodes that process a query, typically during debugging.</td></tr> <tr><td>NUM_REMOTE_EXECUTOR_CANDIDATES</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>NUM_ROWS_PRODUCED_LIMIT</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>NUM_SCANNER_THREADS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>OPTIMIZE_PARTITION_KEY_SCANS</td> <td></td> <td>@since 2.5.0</td> <td>false</td> <td></td> <td>Enables a fast code path for queries that apply simple aggregate functions to partition key columns: <code>MIN(key_column)</code>, <code>MAX(key_column)</code>, or <code>COUNT(DISTINCT key_column)</code>.</td></tr> <tr><td>OPTIMIZE_SIMPLE_LIMIT</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ORC_ASYNC_READ</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ORC_READ_STATISTICS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>ORC_SCHEMA_RESOLUTION</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>PARQUET_ANNOTATE_STRINGS_UTF8</td> <td></td> <td>@since 2.6.0</td> <td>false</td> <td></td> <td>Causes Impala <code>INSERT</code> and <code>CREATE TABLE AS SELECT</code> statements to write Parquet files that use the UTF-8 annotation for <code>STRING</code> columns.</td></tr> <tr><td>PARQUET_ARRAY_RESOLUTION</td> <td></td> <td>@since 2.9.0</td> <td>THREE_LEVEL</td> <td>THREE_LEVEL<br>TWO_LEVEL<br>TWO_LEVEL_THEN_THREE_LEVEL</td> <td>The <code>PARQUET_ARRAY_RESOLUTION</code> query option controls the behavior of the indexed-based resolution for nested arrays in Parquet.</td></tr> <tr><td>PARQUET_BLOOM_FILTER_WRITE</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>PARQUET_BLOOM_FILTERING</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>PARQUET_DICTIONARY_FILTERING</td> <td></td> <td>@since 2.9.0</td> <td>true</td> <td></td> <td>The <code>PARQUET_DICTIONARY_FILTERING</code> query option controls whether Impala uses dictionary filtering for Parquet files.</td></tr> <tr><td>PARQUET_DICTIONARY_RUNTIME_FILTER_ENTRY_LIMIT</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>PARQUET_FALLBACK_SCHEMA_RESOLUTION</td> <td></td> <td>@since 2.6.0</td> <td>POSITION</td> <td>POSITION (0)<br>NAME (1)</td> <td>The <code>PARQUET_FALLBACK_SCHEMA_RESOLUTION</code> query option allows Impala to look up columns within Parquet files by column name, rather than column order, when necessary.</td></tr> <tr><td>PARQUET_FILE_SIZE</td> <td></td> <td></td> <td>0 (produces files with a target size of 256 MB; files might be larger for very wide tables)</td> <td>the maximum value for this setting is 1 gigabyte (<code>1g</code>)</td> <td>Specifies the maximum size of each Parquet data file produced by Impala <code>INSERT</code> statements.</td></tr> <tr><td>PARQUET_LATE_MATERIALIZATION_THRESHOLD</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>PARQUET_OBJECT_STORE_SPLIT_SIZE</td> <td></td> <td></td> <td>256 MB</td> <td>The value must be greater than or equal to 1 MB.</td> <td>Use the <code>PARQUET_OBJECT_STORE_SPLIT_SIZE</code> query option to control the Parquet format specific split sizes on non-block based stores,</td></tr> <tr><td>PARQUET_PAGE_ROW_COUNT_LIMIT</td> <td></td> <td>@since 3.3</td> <td></td> <td></td> <td>set the maximum number of rows that can be written on a single Parquet data page.</td></tr> <tr><td>PARQUET_READ_PAGE_INDEX</td> <td></td> <td></td> <td></td> <td></td> <td>to disable or enable using the Parquet page index during scans. <br>Of the types: Boolean, Integer, Decimal, String, Timestamp.<br>For simple predicates of the forms: <code>&lt;slot&gt; &lt;op&gt; &lt;constant&gt;</code> or <code>&lt;constant&gt; &lt;op&gt; &lt;slot&gt;</code>, where <code>&lt;op&gt;</code> is LT, LE, GE, GT, and EQ</td></tr> <tr><td>PARQUET_READ_STATISTICS</td> <td></td> <td>@since 2.9.0</td> <td>true</td> <td><code>true</code> (<code>1</code>)<br><code>false</code> (<code>0</code>)</td> <td>set the maximum number of rows that can be written on a single Parquet data page.<br>Of the numerical types for the old version of the statistics: Boolean, Integer, Float<br>Of the types for the new version of the statistics (starting in IMPALA 2.8): Boolean, Integer, Float, Decimal, String, Timestamp<br>For simple predicates of the forms: <code>&lt;slot&gt; &lt;op&gt; &lt;constant&gt;</code> or <code>&lt;constant&gt; &lt;op&gt; &lt;slot&gt;</code>, where <code>&lt;op&gt;</code> is LT, LE, GE, GT, and EQ</td></tr> <tr><td>PARQUET_TIMESTAMP_TYPE</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>PARQUET_WRITE_PAGE_INDEX</td> <td></td> <td>@since 3.3</td> <td>TRUE</td> <td><code>true</code> (<code>1</code>)<br><code>false</code> (<code>0</code>)</td> <td>to disable or enable the Parquet page index writing.</td></tr> <tr><td>PLANNER_TESTCASE_MODE</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>PREAGG_BYTES_LIMIT</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>PREFETCH_MODE</td> <td></td> <td>@since 2.6.0</td> <td>1 (equivalent to <code>HT_BUCKET</code>)</td> <td>0(<code>NONE</code>)<br>1(HT_BUCKET)</td> <td>Determines whether the prefetching optimization is applied during join query processing.</td></tr> <tr><td>QUERY_TIMEOUT_S</td> <td></td> <td>@since 2.0.0</td> <td>0</td> <td></td> <td>For queries, this means the query has results ready but is waiting for a client to fetch the data.<br>For sessions, this means that no query has been submitted for some period of time.</td></tr> <tr><td>REFRESH_UPDATED_HMS_PARTITIONS</td> <td></td> <td>@since 4.0.0</td> <td>FALSE</td> <td></td> <td>refresh any updated HMS partitions.</td></tr> <tr><td>REPLICA_PREFERENCE</td> <td></td> <td>@since 2.7.0</td> <td>CACHE_LOCAL (0)</td> <td><code>CACHE_LOCAL</code> (<code>0</code>), <code>DISK_LOCAL</code> (<code>2</code>), <code>REMOTE</code> (<code>4</code>)</td> <td>This allows Impala to schedule reads to suboptimal replicas (e.g. local in the presence of cached ones) in order to distribute the work across more executor nodes.</td></tr> <tr><td>REPORT_SKEW_LIMIT</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>REQUEST_POOL</td> <td></td> <td></td> <td>empty</td> <td></td> <td>The pool or queue name that queries should be submitted to. Only applies when you enable the Impala admission control feature.</td></tr> <tr><td>RESERVATION_REQUEST_TIMEOUT</td> <td></td> <td>Removed</td> <td></td> <td></td> <td></td></tr> <tr><td>RESOURCE_TRACE_RATIO</td> <td></td> <td>@since 3.2</td> <td>0</td> <td>from 0 to 1 are allowed</td> <td>specifies the ratio of queries where the CPU usage info will be included in the profiles.</td></tr> <tr><td>RETRY_FAILED_QUERIES</td> <td></td> <td>@since 4.0</td> <td>TRUE</td> <td></td> <td>control whether or not queries are transparently retried on cluster membership changes.<br>This feature supports retrying the entire query and NOT the individual query fragments. INSERT and DDL queries will NOT be retried.<br>query retry will be skipped if the query has returned any results to the client.</td></tr> <tr><td>RM_INITIAL_MEM</td> <td></td> <td>Removed</td> <td></td> <td></td> <td></td></tr> <tr><td>RUNTIME_BLOOM_FILTER_SIZE</td> <td></td> <td>@since 2.5.0</td> <td>1048576 (1 MB)</td> <td><strong>Maximum:</strong> 16 MB</td> <td>In Impala 2.6 and higher, this query option only applies as a fallback, when statistics are not available.</td></tr> <tr><td>RUNTIME_FILTER_ERROR_RATE</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>RUNTIME_FILTER_MAX_SIZE</td> <td></td> <td>@since 2.6.0</td> <td>0 (meaning use the value from the corresponding impalad startup option)</td> <td></td> <td>defines the maximum size for a filter.Filter sizes are rounded up to the nearest power of two.</td></tr> <tr><td>RUNTIME_FILTER_MIN_SIZE</td> <td></td> <td>@since 2.6.0</td> <td>0 (meaning use the value from the corresponding impalad startup option)</td> <td></td> <td>defines the minimum size for a filter.Filter sizes are rounded up to the nearest power of two.</td></tr> <tr><td>RUNTIME_FILTER_MODE</td> <td></td> <td>@since 2.5.0</td> <td>2</td> <td>numeric (0, 1, 2) or corresponding mnemonic strings (<code>OFF</code>, <code>LOCAL</code>, <code>GLOBAL</code>).</td> <td>It turns this feature on and off, and controls how extensively the filters are transmitted between hosts.</td></tr> <tr><td>RUNTIME_FILTER_WAIT_TIME_MS</td> <td></td> <td>@since 2.5.0</td> <td>0 (meaning use the value from the corresponding impalad startup option)</td> <td></td> <td>specifies a time in milliseconds that each scan node waits for runtime filters to be produced by other plan fragments.</td></tr> <tr><td>RUNTIME_IN_LIST_FILTER_ENTRY_LIMIT</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>S3_SKIP_INSERT_STAGING</td> <td></td> <td>@since 2.6.0</td> <td>true</td> <td></td> <td>Speeds up <code>INSERT</code> operations on tables or partitions residing on the Amazon S3 filesystem.</td></tr> <tr><td>SCAN_BYTES_LIMIT</td> <td></td> <td>@since 3.1</td> <td><code>0</code> (no limit)</td> <td></td> <td>The <code>SCAN_BYTES_LIMIT</code> query option sets a limit on the bytes scanned by HDFS and HBase SCAN operations.</td></tr> <tr><td>SCAN_NODE_CODEGEN_THRESHOLD</td> <td></td> <td>Removed</td> <td></td> <td></td> <td></td></tr> <tr><td>SCHEDULE_RANDOM_REPLICA</td> <td></td> <td>@since 2.5.0</td> <td>false</td> <td></td> <td>The <code>SCHEDULE_RANDOM_REPLICA</code> query option fine-tunes the scheduling algorithm for deciding which host processes each HDFS data block or Kudu tablet to reduce the chance of CPU hotspots.The <code>SCHEDULE_RANDOM_REPLICA</code> query option only applies to tables and partitions that are not enabled for the HDFS caching.</td></tr> <tr><td>SCRATCH_LIMIT</td> <td></td> <td></td> <td>-1 (amount of spill space is unlimited)</td> <td></td> <td>Specifies the maximum amount of disk storage, in bytes, that any Impala query can consume on any host using the &quot;spill to disk&quot; mechanism that handles queries that exceed the memory limit.<br>A value of zero turns off the spill to disk feature for queries in the current session, causing them to fail immediately if they exceed the memory limit.</td></tr> <tr><td>SEQ_COMPRESSION_MODE</td> <td></td> <td>Removed</td> <td></td> <td></td> <td></td></tr> <tr><td>SHOW_COLUMN_MINMAX_STATS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>SHUFFLE_DISTINCT_EXPRS</td> <td></td> <td></td> <td>false</td> <td></td> <td>controls the shuffling behavior when a query has both grouping and distinct expressions. Impala can optionally include the distinct expressions in the hash exchange to spread the data among more nodes. However, this plan requires one more hash exchange phase.<br>It is recommended that you turn off this option if the NDVs of the grouping expressions are high.</td></tr> <tr><td>SORT_RUN_BYTES_LIMIT</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>SPOOL_ALL_RESULTS_FOR_RETRIES</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>SPOOL_QUERY_RESULTS</td> <td></td> <td>@since 3.4</td> <td>FALSE</td> <td></td> <td>Query result spooling controls how rows are returned to the client.</td></tr> <tr><td>STATEMENT_EXPRESSION_LIMIT</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>STRICT_MODE</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>SYNC_DDL</td> <td></td> <td></td> <td>false</td> <td></td> <td>causes any DDL operation such as <code>CREATE TABLE</code> or <code>ALTER TABLE</code> to return only when the changes have been propagated to all other Impala nodes in the cluster by the Impala catalog service.<br><code>INSERT</code> statements also delay their completion until all the underlying data and metadata changes are propagated to all Impala nodes and this option applies to all filesystem-based tables.</td></tr> <tr><td>TARGETED_KUDU_SCAN_RANGE_LENGTH</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>TEST_REPLAN</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>THREAD_RESERVATION_AGGREGATE_LIMIT</td> <td></td> <td>@since 3.1</td> <td>0 (no limit)</td> <td></td> <td>limits the number of reserved threads for a query across all nodes on which it is executing.Queries that have more threads than this threshold are rejected by Impala’s admission controller before they start executing.</td></tr> <tr><td>THREAD_RESERVATION_LIMIT</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>TIMEZONE</td> <td></td> <td>@since 3.1</td> <td>The system time zone where the Coordinator Impalad runs</td> <td>a canonical code or a time zone name defined in <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="noopener noreferrer">IANA Time Zone Database<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</td> <td>defines the timezone used for conversions between UTC and the local time. If not set, Impala uses the system time zone where the Coordinator Impalad runs. <br>Impala takes the timezone into a consideration in the following cases:<br>When calling the <code>NOW()</code> function When converting between Unix time and timestamp if the <code>use_local_tz_for_unix_timestamp_conversions</code> flag is <code>TRUE</code> When reading Parquet timestamps written by Hive if the <code>convert_legacy_hive_parquet_utc_timestamps</code> flag is <code>TRUE</code></td></tr> <tr><td>TOPN_BYTES_LIMIT</td> <td></td> <td>@since 3.1</td> <td>536870912 (512 MB)</td> <td></td> <td>places a limit on the amount of estimated memory that Impala can process for <em>top-N</em> queries.<br><em>Top-N</em> queries don't spill to disk so they have to keep all rows they process in memory.If the Impala planner estimates that a <em>top-N</em> operator will process more bytes than the <code>TOPN_BYTES_LIMIT</code> value, it will replace the <em>top-N</em> operator with the <em>sort</em> operator. Switching to the <em>sort</em> operator allows Impala to spill to disk, thus requiring less memory than <em>top-N</em>, but potentially with performance penalties.</td></tr> <tr><td>USE_DOP_FOR_COSTING</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>USE_LOCAL_TZ_FOR_UNIX_TIMESTAMP_CONVERSIONS</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>UTF8_MODE</td> <td></td> <td>@since 4.1</td> <td>FALSE</td> <td></td> <td>allows string functions to recognize the UTF-8 characters, thus processing strings in a compatible way as other engines.</td></tr> <tr><td>V_CPU_CORES</td> <td></td> <td>Removed</td> <td></td> <td></td> <td></td></tr></tbody></table> <h3 id="参考-2"><a href="#参考-2" class="header-anchor">$</a> 参考</h3> <p><a href="https://impala.apache.org/docs/build/html/topics/impala_query_options.html" target="_blank" rel="noopener noreferrer">Query Options for the SET Statement<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/apache/impala/blob/4.0.0/common/thrift/ImpalaService.thrift#L39" target="_blank" rel="noopener noreferrer">ImpalaService.thrift TImpalaQueryOptions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ddl"><a href="#ddl" class="header-anchor">$</a> DDL</h2> <p>将kudu表从一个impala集群托管到另一个impala集群：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 在A集群创建一个Kudu表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> id_city <span class="token punctuation">(</span>
   id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   city STRING <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> 
<span class="token punctuation">)</span> <span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> <span class="token keyword">HASH</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> PARTITIONS <span class="token number">4</span> STORED <span class="token keyword">AS</span> KUDU<span class="token punctuation">;</span>

<span class="token comment">-- 在B集群创建kudu外表</span>
<span class="token keyword">CREATE</span> external <span class="token keyword">TABLE</span> id_city 
STORED <span class="token keyword">AS</span> KUDU
TBLPROPERTIES <span class="token punctuation">(</span><span class="token string">'kudu.table_name'</span><span class="token operator">=</span><span class="token string">'impala::default.id_city'</span><span class="token punctuation">,</span><span class="token string">'kudu.master_addresses'</span><span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 将B集群的kudu表改为内表：</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> id_city <span class="token keyword">SET</span> TBLPROPERTIES<span class="token punctuation">(</span><span class="token string">'EXTERNAL'</span><span class="token operator">=</span><span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 将A集群的kudu表改为外表：</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> id_city <span class="token keyword">SET</span> TBLPROPERTIES<span class="token punctuation">(</span><span class="token string">'EXTERNAL'</span><span class="token operator">=</span><span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 删除A集群的kudu表</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> id_city<span class="token punctuation">;</span>
</code></pre></div><p>参考：</p> <p><a href="https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/impala_create_table.html#create_table" target="_blank" rel="noopener noreferrer">CREATE TABLE Statement<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/impala_alter_table.html" target="_blank" rel="noopener noreferrer">ALTER TABLE Statement<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="问题"><a href="#问题" class="header-anchor">$</a> 问题</h2> <p><strong>PreparedStatement不能使用UPSERT语句的问题</strong></p> <p>在Version 2.6.8中已被解决（参考 [IMPJ-419] ）。</p> <p><strong>中文乱码</strong></p> <p>参考：<a href="https://docs.cloudera.com/documentation/enterprise/latest/topics/impala_string.html#string" target="_blank" rel="noopener noreferrer">https://docs.cloudera.com/documentation/enterprise/latest/topics/impala_string.html#string<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="sql-hints"><a href="#sql-hints" class="header-anchor">$</a> SQL Hints</h2> <blockquote><p>In Impala 2.0 and higher, you can specify the hints inside comments that use either the <code>/* */</code> or <code>--</code> notation. Specify a <code>+</code> symbol immediately before the hint name. Recently added hints are only available using the <code>/* */</code> and <code>--</code> notation. For clarity, the <code>/* */</code> and <code>--</code> styles are used in the syntax and examples throughout this section. With the <code>/* */</code> or <code>--</code> notation for hints, specify a <code>+</code> symbol immediately before the first hint name. Multiple hints can be specified separated by commas, for example <code>/* +clustered,shuffle */</code></p></blockquote> <div class="language- extra-class"><pre><code>UPSERT /* +NOCLUSTERED,NOSHUFFLE */ INTO ...
</code></pre></div><blockquote><p>Starting from CDH 5.12 / Impala 2.9, the INSERT or UPSERT operations into Kudu tables automatically add an exchange and a sort node to the plan that partitions and sorts the rows according to the partitioning/primary key scheme of the target table (unless the number of rows to be inserted is small enough to trigger single node execution). Since Kudu partitions and sorts rows on write, pre-partitioning and sorting takes some of the load off of Kudu and helps large INSERT operations to complete without timing out. However, this default behavior may slow down the end-to-end performance of the INSERT or UPSERT operations. Starting from CDH 5.13 / Impala 2.10, you can use the /* +NOCLUSTERED <em>/ and /</em> +NOSHUFFLE */ hints together to disable partitioning and sorting before the rows are sent to Kudu. Additionally, since sorting may consume a large amount of memory, consider setting the MEM_LIMIT query option for those queries.</p></blockquote> <p>参考：</p> <p><a href="https://impala.apache.org/docs/build/html/topics/impala_hints.html" target="_blank" rel="noopener noreferrer">https://impala.apache.org/docs/build/html/topics/impala_hints.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://docs.cloudera.com/documentation/enterprise/5-16-x/topics/impala_upsert.html" target="_blank" rel="noopener noreferrer">https://docs.cloudera.com/documentation/enterprise/5-16-x/topics/impala_upsert.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/impala_kudu.html" target="_blank" rel="noopener noreferrer">https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/impala_kudu.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="impala-flush-mode"><a href="#impala-flush-mode" class="header-anchor">$</a> Impala flush mode</h2> <p>Use Kudu AUTO_FLUSH_BACKGROUND mode</p> <p><a href="https://issues.apache.org/jira/browse/IMPALA-4134" target="_blank" rel="noopener noreferrer">https://issues.apache.org/jira/browse/IMPALA-4134<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="admission-control"><a href="#admission-control" class="header-anchor">$</a> Admission Control</h2> <h3 id="配置"><a href="#配置" class="header-anchor">$</a> 配置</h3> <p>对于使用名为<code>default</code>的单个资源池的简单配置 ，可以在命令行上指定配置选项：</p> <table><thead><tr><th>配置项</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>--queue_wait_timeout_ms</td> <td>int64</td> <td>60000</td> <td>请求在队列中等待的超时时间（单位：毫秒）</td></tr> <tr><td>--default_pool_max_requests</td> <td>int64</td> <td>-1</td> <td>在请求排队之前允许运行的最大并发数。是一个软限制，在负载较重时，并发查询的总数可能会略高。负值表示没有限制。</td></tr> <tr><td>--default_pool_max_queued</td> <td>int64</td> <td>无限制</td> <td>在拒绝请求之前允许排队的最大请求数。是一个软限制，在负载较重时，排队查询的总数可能会略高。负值或 0 表示一旦达到最大并发请求，请求总是被拒绝。</td></tr> <tr><td>--default_pool_mem_limit</td> <td>string</td> <td>&quot;&quot;</td> <td>在对该资源池的新请求排队之前，该资源池中所有未完成的请求可以使用的最大内存量（跨整个集群）。以字节、兆字节或千兆字节为单位，由一个数字后跟大写或小写后缀<code>b</code>（可选）<code>m</code>、 或<code>g</code>指定。可以为兆字节和千兆字节指定浮点值。还可以通过指定<code>%</code>后缀将其指定为物理内存的百分比。0 或不设置表示无限制。是一个软限制，在负载较重的时候，并发查询使用的总内存可能会略高一些。</td></tr> <tr><td>--disable_pool_max_requests</td> <td>Boolean</td> <td>false</td> <td>解除针对每个资源池的最大运行请求的限制。</td></tr> <tr><td>--disable_pool_mem_limits</td> <td>Boolean</td> <td>false</td> <td>解除每个资源池的内存限制。</td></tr></tbody></table> <p>对于具有使用不同设置的多个资源池的高级配置，需要手动设置配置文件：</p> <ul><li><p>通过<code>--‑‑fair_scheduler_allocation_path=fair-scheduler.xml</code>指定<code>fair-scheduler.xml</code>配置文件的路径</p></li> <li><p>通过<code>--‑‑llama_site_path=llama-site.xml</code>指定<code>llama-site.xml</code>配置文件的路径</p></li></ul> <p>fair-scheduler.xml示例：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>allocations</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>queue</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aclSubmitApps</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aclSubmitApps</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>queue</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxResources</span><span class="token punctuation">&gt;</span></span>50000 mb, 0 vcores<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxResources</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aclSubmitApps</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aclSubmitApps</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>queue</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>queue</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxResources</span><span class="token punctuation">&gt;</span></span>200000 mb, 0 vcores<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxResources</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aclSubmitApps</span><span class="token punctuation">&gt;</span></span>user1,user2 dev,ops,admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aclSubmitApps</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>queue</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>queue</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>production<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxResources</span><span class="token punctuation">&gt;</span></span>1000000 mb, 0 vcores<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxResources</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aclSubmitApps</span><span class="token punctuation">&gt;</span></span> ops,admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aclSubmitApps</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>queue</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>queue</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>queuePlacementPolicy</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rule</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>specified<span class="token punctuation">&quot;</span></span> <span class="token attr-name">create</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rule</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>queuePlacementPolicy</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>allocations</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>llama-site.xml示例：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>llama.am.throttling.maximum.placed.reservations.root.default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>llama.am.throttling.maximum.queued.reservations.root.default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>50<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--指定该资源池里运行查询的默认查询选项--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>impala.admission-control.pool-default-query-options.root.default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mem_limit=128m,query_timeout_s=20,max_io_buffers=10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--队列排队的超时时间，单位：毫秒--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>impala.admission-control.pool-queue-timeout-ms.root.default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>30000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>impala.admission-control.max-query-mem-limit.root.default.regularPool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1610612736<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--1.5GB--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>impala.admission-control.min-query-mem-limit.root.default.regularPool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>52428800<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--50MB--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>impala.admission-control.clamp-mem-limit-query-option.root.default.regularPool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="参考-3"><a href="#参考-3" class="header-anchor">$</a> 参考</h3> <p><a href="https://impala.apache.org/docs/build/html/topics/impala_admission_config.html" target="_blank" rel="noopener noreferrer">Configuring Admission Control<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">11/7/2022, 1:59:51 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/bigdata/impala/cup.html" class="prev">
        CUP学习笔记
      </a></span> <span class="next"><a href="/bigdata/impala/impala_admin.html">
        Impala运维
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a2246195.js" defer></script><script src="/assets/js/2.a92520c9.js" defer></script><script src="/assets/js/71.edff7b32.js" defer></script>
  </body>
</html>
